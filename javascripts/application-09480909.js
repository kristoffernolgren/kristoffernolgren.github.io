/**
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Liam Brummitt
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(){var t={},e={};!function(){e._inertiaScale=4;var t=1,i=-1,n=1;e.create=function(t){var e={id:f.nextId(),type:"body",label:"Body",parts:[],angle:0,vertices:_.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,sprite:{xScale:1,yScale:1},lineWidth:1.5}},i=f.extend(e,t);return o(i,t),i},e.nextGroup=function(e){return e?i--:t++},e.nextCategory=function(){return n<<=1};var o=function(t,i){e.set(t,{bounds:t.bounds||C.create(t.vertices),positionPrev:t.positionPrev||A.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),_.rotate(t.vertices,t.angle,t.position),S.rotate(t.axes,t.angle),C.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var n=t.isStatic?"#eeeeee":f.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]),o=f.shadeColor(n,-20);t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||o};e.set=function(t,i,n){var o;"string"==typeof i&&(o=i,i={},i[o]=n);for(o in i)if(n=i[o],i.hasOwnProperty(o))switch(o){case"isStatic":e.setStatic(t,n);break;case"isSleeping":x.set(t,n);break;case"mass":e.setMass(t,n);break;case"density":e.setDensity(t,n);break;case"inertia":e.setInertia(t,n);break;case"vertices":e.setVertices(t,n);break;case"position":e.setPosition(t,n);break;case"angle":e.setAngle(t,n);break;case"velocity":e.setVelocity(t,n);break;case"angularVelocity":e.setAngularVelocity(t,n);break;case"parts":e.setParts(t,n);break;default:t[o]=n}},e.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var n=t.parts[i];n.isStatic=e,e&&(n.restitution=0,n.friction=1,n.mass=n.inertia=n.density=1/0,n.inverseMass=n.inverseInertia=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.angularVelocity=0,n.speed=0,n.angularSpeed=0,n.motion=0)}},e.setMass=function(t,e){t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){t.vertices=i[0].body===t?i:_.create(i,t),t.axes=S.fromVertices(t.vertices),t.area=_.area(t.vertices),e.setMass(t,t.density*t.area);var n=_.centre(t.vertices);_.translate(t.vertices,n,-1),e.setInertia(t,e._inertiaScale*_.inertia(t.vertices,t.mass)),_.translate(t.vertices,t.position),C.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,n){var o;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<i.length;o++){var s=i[o];s!==t&&(s.parent=t,t.parts.push(s))}if(1!==t.parts.length){if(n="undefined"!=typeof n?n:!0){var a=[];for(o=0;o<i.length;o++)a=a.concat(i[o].vertices);_.clockwiseSort(a);var l=_.hull(a),c=_.centre(l);e.setVertices(t,l),_.translate(t.vertices,c)}var u=r(t);t.area=u.area,t.parent=t,t.position.x=u.centre.x,t.position.y=u.centre.y,t.positionPrev.x=u.centre.x,t.positionPrev.y=u.centre.y,e.setMass(t,u.mass),e.setInertia(t,u.inertia),e.setPosition(t,u.centre)}},e.setPosition=function(t,e){var i=A.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var n=0;n<t.parts.length;n++){var o=t.parts[n];o.position.x+=i.x,o.position.y+=i.y,_.translate(o.vertices,i),C.update(o.bounds,o.vertices,t.velocity)}},e.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var n=0;n<t.parts.length;n++){var o=t.parts[n];o.angle+=i,_.rotate(o.vertices,i,t.position),S.rotate(o.axes,i),C.update(o.bounds,o.vertices,t.velocity),n>0&&A.rotateAbout(o.position,i,t.position,o.position)}},e.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=A.magnitude(t.velocity)},e.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,i){e.setPosition(t,A.add(t.position,i))},e.rotate=function(t,i){e.setAngle(t,t.angle+i)},e.scale=function(t,i,n){for(var o=0;o<t.parts.length;o++){var s=t.parts[o];_.scale(s.vertices,i,n,t.position),s.axes=S.fromVertices(s.vertices),t.isStatic||(s.area=_.area(s.vertices),e.setMass(s,t.density*s.area),_.translate(s.vertices,{x:-s.position.x,y:-s.position.y}),e.setInertia(s,_.inertia(s.vertices,s.mass)),_.translate(s.vertices,{x:s.position.x,y:s.position.y})),C.update(s.bounds,s.vertices,t.velocity)}if(!t.isStatic){var a=r(t);t.area=a.area,e.setMass(t,a.mass),e.setInertia(t,a.inertia)}},e.update=function(t,e,i,n){var o=Math.pow(e*i*t.timeScale,2),r=1-t.frictionAir*i*t.timeScale,s=t.position.x-t.positionPrev.x,a=t.position.y-t.positionPrev.y;t.velocity.x=s*r*n+t.force.x/t.mass*o,t.velocity.y=a*r*n+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*r*n+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=A.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var l=0;l<t.parts.length;l++){var c=t.parts[l];_.translate(c.vertices,t.velocity),l>0&&(c.position.x+=t.velocity.x,c.position.y+=t.velocity.y),0!==t.angularVelocity&&(_.rotate(c.vertices,t.angularVelocity,t.position),S.rotate(c.axes,t.angularVelocity),l>0&&A.rotateAbout(c.position,t.angularVelocity,t.position,c.position)),C.update(c.bounds,c.vertices,t.velocity)}},e.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var n={x:e.x-t.position.x,y:e.y-t.position.y};t.torque+=(n.x*i.y-n.y*i.x)*t.inverseInertia};var r=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var n=t.parts[i];e.mass+=n.mass,e.area+=n.area,e.inertia+=n.inertia,e.centre=A.add(e.centre,A.mult(n.position,1/0!==n.mass?n.mass:1))}return e.centre=A.div(e.centre,1/0!==e.mass?e.mass:t.parts.length),e}}();var i={};!function(){i.create=function(t){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite"},t)},i.setModified=function(t,e,n,o){if(t.isModified=e,n&&t.parent&&i.setModified(t.parent,e,n,o),o)for(var r=0;r<t.composites.length;r++){var s=t.composites[r];i.setModified(s,e,n,o)}},i.add=function(t,e){var n=[].concat(e);m.trigger(t,"beforeAdd",{object:e});for(var o=0;o<n.length;o++){var r=n[o];switch(r.type){case"body":if(r.parent!==r){f.log("Composite.add: skipped adding a compound body part (you must add its parent instead)","warn");break}i.addBody(t,r);break;case"constraint":i.addConstraint(t,r);break;case"composite":i.addComposite(t,r);break;case"mouseConstraint":i.addConstraint(t,r.constraint)}}return m.trigger(t,"afterAdd",{object:e}),t},i.remove=function(t,e,n){var o=[].concat(e);m.trigger(t,"beforeRemove",{object:e});for(var r=0;r<o.length;r++){var s=o[r];switch(s.type){case"body":i.removeBody(t,s,n);break;case"constraint":i.removeConstraint(t,s,n);break;case"composite":i.removeComposite(t,s,n);break;case"mouseConstraint":i.removeConstraint(t,s.constraint)}}return m.trigger(t,"afterRemove",{object:e}),t},i.addComposite=function(t,e){return t.composites.push(e),e.parent=t,i.setModified(t,!0,!0,!1),t},i.removeComposite=function(t,e,n){var o=f.indexOf(t.composites,e);if(-1!==o&&(i.removeCompositeAt(t,o),i.setModified(t,!0,!0,!1)),n)for(var r=0;r<t.composites.length;r++)i.removeComposite(t.composites[r],e,!0);return t},i.removeCompositeAt=function(t,e){return t.composites.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addBody=function(t,e){return t.bodies.push(e),i.setModified(t,!0,!0,!1),t},i.removeBody=function(t,e,n){var o=f.indexOf(t.bodies,e);if(-1!==o&&(i.removeBodyAt(t,o),i.setModified(t,!0,!0,!1)),n)for(var r=0;r<t.composites.length;r++)i.removeBody(t.composites[r],e,!0);return t},i.removeBodyAt=function(t,e){return t.bodies.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addConstraint=function(t,e){return t.constraints.push(e),i.setModified(t,!0,!0,!1),t},i.removeConstraint=function(t,e,n){var o=f.indexOf(t.constraints,e);if(-1!==o&&i.removeConstraintAt(t,o),n)for(var r=0;r<t.composites.length;r++)i.removeConstraint(t.composites[r],e,!0);return t},i.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),i.setModified(t,!0,!0,!1),t},i.clear=function(t,e,n){if(n)for(var o=0;o<t.composites.length;o++)i.clear(t.composites[o],e,!0);return e?t.bodies=t.bodies.filter(function(t){return t.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,i.setModified(t,!0,!0,!1),t},i.allBodies=function(t){for(var e=[].concat(t.bodies),n=0;n<t.composites.length;n++)e=e.concat(i.allBodies(t.composites[n]));return e},i.allConstraints=function(t){for(var e=[].concat(t.constraints),n=0;n<t.composites.length;n++)e=e.concat(i.allConstraints(t.composites[n]));return e},i.allComposites=function(t){for(var e=[].concat(t.composites),n=0;n<t.composites.length;n++)e=e.concat(i.allComposites(t.composites[n]));return e},i.get=function(t,e,n){var o,r;switch(n){case"body":o=i.allBodies(t);break;case"constraint":o=i.allConstraints(t);break;case"composite":o=i.allComposites(t).concat(t)}return o?(r=o.filter(function(t){return t.id.toString()===e.toString()}),0===r.length?null:r[0]):null},i.move=function(t,e,n){return i.remove(t,e),i.add(n,e),t},i.rebase=function(t){for(var e=i.allBodies(t).concat(i.allConstraints(t)).concat(i.allComposites(t)),n=0;n<e.length;n++)e[n].id=f.nextId();return i.setModified(t,!0,!0,!1),t},i.translate=function(t,n,o){for(var r=o?i.allBodies(t):t.bodies,s=0;s<r.length;s++)e.translate(r[s],n);return i.setModified(t,!0,!0,!1),t},i.rotate=function(t,n,o,r){for(var s=Math.cos(n),a=Math.sin(n),l=r?i.allBodies(t):t.bodies,c=0;c<l.length;c++){var u=l[c],d=u.position.x-o.x,p=u.position.y-o.y;e.setPosition(u,{x:o.x+(d*s-p*a),y:o.y+(d*a+p*s)}),e.rotate(u,n)}return i.setModified(t,!0,!0,!1),t},i.scale=function(t,n,o,r,s){for(var a=s?i.allBodies(t):t.bodies,l=0;l<a.length;l++){var c=a[l],u=c.position.x-r.x,d=c.position.y-r.y;e.setPosition(c,{x:r.x+u*n,y:r.y+d*o}),e.scale(c,n,o)}return i.setModified(t,!0,!0,!1),t}}();var n={};!function(){n.create=function(t){var e=i.create(),n={label:"World",gravity:{x:0,y:1},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return f.extend(e,n,t)}}();var o={};!function(){o.create=function(t){return{id:o.id(t),vertex:t,normalImpulse:0,tangentImpulse:0}},o.id=function(t){return t.body.id+"_"+t.index}}();var r={};!function(){r.collisions=function(t,e){for(var i=[],n=e.pairs.table,o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];if((!s.isStatic&&!s.isSleeping||!l.isStatic&&!l.isSleeping)&&r.canCollide(s.collisionFilter,l.collisionFilter)&&C.overlaps(s.bounds,l.bounds))for(var c=s.parts.length>1?1:0;c<s.parts.length;c++)for(var u=s.parts[c],p=l.parts.length>1?1:0;p<l.parts.length;p++){var h=l.parts[p];if(u===s&&h===l||C.overlaps(u.bounds,h.bounds)){var f,v=a.id(u,h),m=n[v];f=m&&m.isActive?m.collision:null;var g=d.collides(u,h,f);g.collided&&i.push(g)}}}return i},r.bruteForce=function(t,e){for(var i=[],n=e.pairs.table,o=0;o<t.length;o++)for(var s=o+1;s<t.length;s++){var l=t[o],c=t[s];if((!l.isStatic&&!l.isSleeping||!c.isStatic&&!c.isSleeping)&&r.canCollide(l.collisionFilter,c.collisionFilter)&&C.overlaps(l.bounds,c.bounds)){var u,p=a.id(l,c),h=n[p];u=h&&h.isActive?h.collision:null;var f=d.collides(l,c,u);f.collided&&i.push(f)}}return i},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!==(t.mask&e.category)&&0!==(e.mask&t.category)}}();var s={};!function(){s.create=function(t){var e={controller:s,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return f.extend(e,t)},s.update=function(i,r,s,a){var d,p,h,f,v,m=s.world,g=i.buckets,y=!1;for(d=0;d<r.length;d++){var x=r[d];if((!x.isSleeping||a)&&!(x.bounds.max.x<0||x.bounds.min.x>m.bounds.width||x.bounds.max.y<0||x.bounds.min.y>m.bounds.height)){var b=e(i,x);if(!x.region||b.id!==x.region.id||a){(!x.region||a)&&(x.region=b);var w=t(b,x.region);for(p=w.startCol;p<=w.endCol;p++)for(h=w.startRow;h<=w.endRow;h++){v=n(p,h),f=g[v];var S=p>=b.startCol&&p<=b.endCol&&h>=b.startRow&&h<=b.endRow,C=p>=x.region.startCol&&p<=x.region.endCol&&h>=x.region.startRow&&h<=x.region.endRow;!S&&C&&C&&f&&c(i,f,x),(x.region===b||S&&!C||a)&&(f||(f=o(g,v)),l(i,f,x))}x.region=b,y=!0}}}y&&(i.pairsList=u(i))},s.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]};var t=function(t,e){var n=Math.min(t.startCol,e.startCol),o=Math.max(t.endCol,e.endCol),r=Math.min(t.startRow,e.startRow),s=Math.max(t.endRow,e.endRow);return i(n,o,r,s)},e=function(t,e){var n=e.bounds,o=Math.floor(n.min.x/t.bucketWidth),r=Math.floor(n.max.x/t.bucketWidth),s=Math.floor(n.min.y/t.bucketHeight),a=Math.floor(n.max.y/t.bucketHeight);return i(o,r,s,a)},i=function(t,e,i,n){return{id:t+","+e+","+i+","+n,startCol:t,endCol:e,startRow:i,endRow:n}},n=function(t,e){return t+","+e},o=function(t,e){var i=t[e]=[];return i},l=function(t,e,i){for(var n=0;n<e.length;n++){var o=e[n];if(!(i.id===o.id||i.isStatic&&o.isStatic)){var r=a.id(i,o),s=t.pairs[r];s?s[2]+=1:t.pairs[r]=[i,o,1]}}e.push(i)},c=function(t,e,i){e.splice(f.indexOf(e,i),1);for(var n=0;n<e.length;n++){var o=e[n],r=a.id(i,o),s=t.pairs[r];s&&(s[2]-=1)}},u=function(t){var e,i,n=[];e=f.keys(t.pairs);for(var o=0;o<e.length;o++)i=t.pairs[e[o]],i[2]>0?n.push(i):delete t.pairs[e[o]];return n}}();var a={};!function(){a.create=function(t,e){var i=t.bodyA,n=t.bodyB,o=t.parentA,r=t.parentB,s={id:a.id(i,n),bodyA:i,bodyB:n,contacts:{},activeContacts:[],separation:0,isActive:!0,timeCreated:e,timeUpdated:e,inverseMass:o.inverseMass+r.inverseMass,friction:Math.min(o.friction,r.friction),frictionStatic:Math.max(o.frictionStatic,r.frictionStatic),restitution:Math.max(o.restitution,r.restitution),slop:Math.max(o.slop,r.slop)};return a.update(s,t,e),s},a.update=function(t,e,i){var n=t.contacts,r=e.supports,s=t.activeContacts,l=e.parentA,c=e.parentB;if(t.collision=e,t.inverseMass=l.inverseMass+c.inverseMass,t.friction=Math.min(l.friction,c.friction),t.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),t.restitution=Math.max(l.restitution,c.restitution),t.slop=Math.max(l.slop,c.slop),s.length=0,e.collided){for(var u=0;u<r.length;u++){var d=r[u],p=o.id(d),h=n[p];s.push(h?h:n[p]=o.create(d))}t.separation=e.depth,a.setActive(t,!0,i)}else t.isActive===!0&&a.setActive(t,!1,i)},a.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},a.id=function(t,e){return t.id<e.id?t.id+"_"+e.id:e.id+"_"+t.id}}();var l={};!function(){var t=1e3;l.create=function(t){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},l.update=function(t,e,i){var n,o,r,s,l=t.list,c=t.table,u=t.collisionStart,d=t.collisionEnd,p=t.collisionActive,h=[];for(u.length=0,d.length=0,p.length=0,s=0;s<e.length;s++)n=e[s],n.collided&&(o=a.id(n.bodyA,n.bodyB),h.push(o),r=c[o],r?(r.isActive?p.push(r):u.push(r),a.update(r,n,i)):(r=a.create(n,i),c[o]=r,u.push(r),l.push(r)));for(s=0;s<l.length;s++)r=l[s],r.isActive&&-1===f.indexOf(h,r.id)&&(a.setActive(r,!1,i),d.push(r))},l.removeOld=function(e,i){var n,o,r,s,a=e.list,l=e.table,c=[];for(s=0;s<a.length;s++)n=a[s],o=n.collision,o.bodyA.isSleeping||o.bodyB.isSleeping?n.timeUpdated=i:i-n.timeUpdated>t&&c.push(s);for(s=0;s<c.length;s++)r=c[s]-s,n=a[r],delete l[n.id],a.splice(r,1)},l.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}}();var c={};!function(){c.ray=function(t,e,i,n){n=n||1e-100;for(var o=A.angle(e,i),r=A.magnitude(A.sub(e,i)),s=.5*(i.x+e.x),a=.5*(i.y+e.y),l=b.rectangle(s,a,r,n,{angle:o}),c=[],u=0;u<t.length;u++){var p=t[u];if(C.overlaps(p.bounds,l.bounds))for(var h=1===p.parts.length?0:1;h<p.parts.length;h++){var f=p.parts[h];if(C.overlaps(f.bounds,l.bounds)){var v=d.collides(f,l);if(v.collided){v.body=v.bodyA=v.bodyB=p,c.push(v);break}}}}return c},c.region=function(t,e,i){for(var n=[],o=0;o<t.length;o++){var r=t[o],s=C.overlaps(r.bounds,e);(s&&!i||!s&&i)&&n.push(r)}return n},c.point=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n];if(C.contains(o.bounds,e))for(var r=1===o.parts.length?0:1;r<o.parts.length;r++){var s=o.parts[r];if(C.contains(s.bounds,e)&&_.contains(s.vertices,e)){i.push(o);break}}}return i}}();var u={};!function(){u._restingThresh=4,u._positionDampen=.9,u._positionWarming=.8,u._frictionNormalMultiplier=5,u.preSolvePosition=function(t){var e,i,n;for(e=0;e<t.length;e++)i=t[e],i.isActive&&(n=i.activeContacts.length,i.collision.parentA.totalContacts+=n,i.collision.parentB.totalContacts+=n)},u.solvePosition=function(t,e){var i,n,o,r,s,a,l,c,d=A._temp[0],p=A._temp[1],h=A._temp[2],f=A._temp[3];for(i=0;i<t.length;i++)n=t[i],n.isActive&&(o=n.collision,r=o.parentA,s=o.parentB,a=o.normal,l=A.sub(A.add(s.positionImpulse,s.position,d),A.add(r.positionImpulse,A.sub(s.position,o.penetration,p),h),f),n.separation=A.dot(a,l));for(i=0;i<t.length;i++)n=t[i],!n.isActive||n.separation<0||(o=n.collision,r=o.parentA,s=o.parentB,a=o.normal,positionImpulse=(n.separation-n.slop)*e,(r.isStatic||s.isStatic)&&(positionImpulse*=2),r.isStatic||r.isSleeping||(c=u._positionDampen/r.totalContacts,r.positionImpulse.x+=a.x*positionImpulse*c,r.positionImpulse.y+=a.y*positionImpulse*c),s.isStatic||s.isSleeping||(c=u._positionDampen/s.totalContacts,s.positionImpulse.x-=a.x*positionImpulse*c,s.positionImpulse.y-=a.y*positionImpulse*c))},u.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var n=0;n<i.parts.length;n++){var o=i.parts[n];_.translate(o.vertices,i.positionImpulse),C.update(o.bounds,o.vertices,i.velocity),o.position.x+=i.positionImpulse.x,o.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,A.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=u._positionWarming,i.positionImpulse.y*=u._positionWarming)}}},u.preSolveVelocity=function(t){var e,i,n,o,r,s,a,l,c,u,d,p,h,f,v=A._temp[0],m=A._temp[1];for(e=0;e<t.length;e++)if(n=t[e],n.isActive)for(o=n.activeContacts,r=n.collision,s=r.parentA,a=r.parentB,l=r.normal,c=r.tangent,i=0;i<o.length;i++)u=o[i],d=u.vertex,p=u.normalImpulse,h=u.tangentImpulse,(0!==p||0!==h)&&(v.x=l.x*p+c.x*h,v.y=l.y*p+c.y*h,s.isStatic||s.isSleeping||(f=A.sub(d,s.position,m),s.positionPrev.x+=v.x*s.inverseMass,s.positionPrev.y+=v.y*s.inverseMass,s.anglePrev+=A.cross(f,v)*s.inverseInertia),a.isStatic||a.isSleeping||(f=A.sub(d,a.position,m),a.positionPrev.x-=v.x*a.inverseMass,a.positionPrev.y-=v.y*a.inverseMass,a.anglePrev-=A.cross(f,v)*a.inverseInertia))},u.solveVelocity=function(t,e){for(var i=e*e,n=A._temp[0],o=A._temp[1],r=A._temp[2],s=A._temp[3],a=A._temp[4],l=A._temp[5],c=0;c<t.length;c++){var d=t[c];if(d.isActive){var p=d.collision,h=p.parentA,v=p.parentB,m=p.normal,g=p.tangent,y=d.activeContacts,x=1/y.length;h.velocity.x=h.position.x-h.positionPrev.x,h.velocity.y=h.position.y-h.positionPrev.y,v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,h.angularVelocity=h.angle-h.anglePrev,v.angularVelocity=v.angle-v.anglePrev;for(var b=0;b<y.length;b++){var w=y[b],S=w.vertex,C=A.sub(S,h.position,o),k=A.sub(S,v.position,r),E=A.add(h.velocity,A.mult(A.perp(C),h.angularVelocity),s),_=A.add(v.velocity,A.mult(A.perp(k),v.angularVelocity),a),P=A.sub(E,_,l),M=A.dot(m,P),T=A.dot(g,P),I=Math.abs(T),B=f.sign(T),L=(1+d.restitution)*M,D=f.clamp(d.separation+M,0,1)*u._frictionNormalMultiplier,q=T,N=1/0;I>d.friction*d.frictionStatic*D*i&&(q=d.friction*B*i,N=I);var F=A.cross(C,m),O=A.cross(k,m),R=h.inverseMass+v.inverseMass+h.inverseInertia*F*F+v.inverseInertia*O*O;if(L*=x/R,q*=x/(1+R),0>M&&M*M>u._restingThresh*i)w.normalImpulse=0,w.tangentImpulse=0;else{var j=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+L,0),L=w.normalImpulse-j;var z=w.tangentImpulse;w.tangentImpulse=f.clamp(w.tangentImpulse+q,-N,N),q=w.tangentImpulse-z}n.x=m.x*L+g.x*q,n.y=m.y*L+g.y*q,h.isStatic||h.isSleeping||(h.positionPrev.x+=n.x*h.inverseMass,h.positionPrev.y+=n.y*h.inverseMass,h.anglePrev+=A.cross(C,n)*h.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=n.x*v.inverseMass,v.positionPrev.y-=n.y*v.inverseMass,v.anglePrev-=A.cross(k,n)*v.inverseInertia)}}}}}();var d={};!function(){d.collides=function(e,n,o){var r,s,a,l,c=o,u=!1;if(c){var d=e.parent,p=n.parent,h=d.speed*d.speed+d.angularSpeed*d.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;u=c&&c.collided&&.2>h,l=c}else l={collided:!1,bodyA:e,bodyB:n};if(c&&u){var f=l.axisBody,v=f===e?n:e,m=[f.axes[c.axisNumber]];if(a=t(f.vertices,v.vertices,m),l.reused=!0,a.overlap<=0)return l.collided=!1,l}else{if(r=t(e.vertices,n.vertices,e.axes),r.overlap<=0)return l.collided=!1,l;if(s=t(n.vertices,e.vertices,n.axes),s.overlap<=0)return l.collided=!1,l;r.overlap<s.overlap?(a=r,l.axisBody=e):(a=s,l.axisBody=n),l.axisNumber=a.axisNumber}l.bodyA=e.id<n.id?e:n,l.bodyB=e.id<n.id?n:e,l.collided=!0,l.normal=a.axis,l.depth=a.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,e=l.bodyA,n=l.bodyB,A.dot(l.normal,A.sub(n.position,e.position))>0&&(l.normal=A.neg(l.normal)),l.tangent=A.perp(l.normal),l.penetration={x:l.normal.x*l.depth,y:l.normal.y*l.depth};var g=i(e,n,l.normal),y=l.supports||[];if(y.length=0,_.contains(e.vertices,g[0])&&y.push(g[0]),_.contains(e.vertices,g[1])&&y.push(g[1]),y.length<2){var x=i(n,e,A.neg(l.normal));_.contains(n.vertices,x[0])&&y.push(x[0]),y.length<2&&_.contains(n.vertices,x[1])&&y.push(x[1])}return y.length<1&&(y=[g[0]]),l.supports=y,l};var t=function(t,i,n){for(var o,r,s=A._temp[0],a=A._temp[1],l={overlap:Number.MAX_VALUE},c=0;c<n.length;c++){if(r=n[c],e(s,t,r),e(a,i,r),o=Math.min(s.max-a.min,a.max-s.min),0>=o)return l.overlap=o,l;o<l.overlap&&(l.overlap=o,l.axis=r,l.axisNumber=c)}return l},e=function(t,e,i){for(var n=A.dot(e[0],i),o=n,r=1;r<e.length;r+=1){var s=A.dot(e[r],i);s>o?o=s:n>s&&(n=s)}t.min=n,t.max=o},i=function(t,e,i){for(var n,o,r,s,a=Number.MAX_VALUE,l=A._temp[0],c=e.vertices,u=t.position,d=0;d<c.length;d++)o=c[d],l.x=o.x-u.x,l.y=o.y-u.y,n=-A.dot(i,l),a>n&&(a=n,r=o);var p=r.index-1>=0?r.index-1:c.length-1;o=c[p],l.x=o.x-u.x,l.y=o.y-u.y,a=-A.dot(i,l),s=o;var h=(r.index+1)%c.length;return o=c[h],l.x=o.x-u.x,l.y=o.y-u.y,n=-A.dot(i,l),a>n&&(s=o),[r,s]}}();var p={};!function(){var t=1e-6,e=.001;p.create=function(e){var i=e;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var n=i.bodyA?A.add(i.bodyA.position,i.pointA):i.pointA,o=i.bodyB?A.add(i.bodyB.position,i.pointB):i.pointB,r=A.magnitude(A.sub(n,o));i.length=i.length||r||t;var s={visible:!0,lineWidth:2,strokeStyle:"#666"};return i.render=f.extend(s,i.render),i.id=i.id||f.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||1,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i},p.solveAll=function(t,e){for(var i=0;i<t.length;i++)p.solve(t[i],e)},p.solve=function(i,n){var o=i.bodyA,r=i.bodyB,s=i.pointA,a=i.pointB;o&&!o.isStatic&&(i.pointA=A.rotate(s,o.angle-i.angleA),i.angleA=o.angle),r&&!r.isStatic&&(i.pointB=A.rotate(a,r.angle-i.angleB),i.angleB=r.angle);var l=s,c=a;if(o&&(l=A.add(o.position,s)),r&&(c=A.add(r.position,a)),l&&c){var u=A.sub(l,c),d=A.magnitude(u);0===d&&(d=t);var p=(d-i.length)/d,h=A.div(u,d),v=A.mult(u,.5*p*i.stiffness*n*n);if(!(Math.abs(1-d/i.length)<e*n)){var m,g,y,b,w,S,C,k;o&&!o.isStatic?(y={x:l.x-o.position.x+v.x,y:l.y-o.position.y+v.y},o.velocity.x=o.position.x-o.positionPrev.x,o.velocity.y=o.position.y-o.positionPrev.y,o.angularVelocity=o.angle-o.anglePrev,m=A.add(o.velocity,A.mult(A.perp(y),o.angularVelocity)),w=A.dot(y,h),C=o.inverseMass+o.inverseInertia*w*w):(m={x:0,y:0},C=o?o.inverseMass:0),r&&!r.isStatic?(b={x:c.x-r.position.x-v.x,y:c.y-r.position.y-v.y},r.velocity.x=r.position.x-r.positionPrev.x,r.velocity.y=r.position.y-r.positionPrev.y,r.angularVelocity=r.angle-r.anglePrev,g=A.add(r.velocity,A.mult(A.perp(b),r.angularVelocity)),S=A.dot(b,h),k=r.inverseMass+r.inverseInertia*S*S):(g={x:0,y:0},k=r?r.inverseMass:0);var E=A.sub(g,m),_=A.dot(h,E)/(C+k);_>0&&(_=0);var P,M={x:h.x*_,y:h.y*_};o&&!o.isStatic&&(P=A.cross(y,M)*o.inverseInertia*(1-i.angularStiffness),x.set(o,!1),P=f.clamp(P,-.01,.01),o.constraintImpulse.x-=v.x,o.constraintImpulse.y-=v.y,o.constraintImpulse.angle+=P,o.position.x-=v.x,o.position.y-=v.y,o.angle+=P),r&&!r.isStatic&&(P=A.cross(b,M)*r.inverseInertia*(1-i.angularStiffness),x.set(r,!1),P=f.clamp(P,-.01,.01),r.constraintImpulse.x+=v.x,r.constraintImpulse.y+=v.y,r.constraintImpulse.angle-=P,r.position.x+=v.x,r.position.y+=v.y,r.angle-=P)}}},p.postSolveAll=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=i.constraintImpulse,o=0;o<i.parts.length;o++){var r=i.parts[o];_.translate(r.vertices,n),o>0&&(r.position.x+=n.x,r.position.y+=n.y),0!==n.angle&&(_.rotate(r.vertices,n.angle,i.position),S.rotate(r.axes,n.angle),o>0&&A.rotateAbout(r.position,n.angle,i.position,r.position)),C.update(r.bounds,r.vertices)}n.angle=0,n.x=0,n.y=0}}}();var h={};!function(){h.create=function(e,n){var o=(e?e.mouse:null)||(n?n.mouse:null);!o&&e&&e.render&&e.render.canvas?o=g.create(e.render.canvas):(o=g.create(),f.log("MouseConstraint.create: options.mouse was undefined, engine.render.canvas was undefined, may not function as expected","warn"));var r=p.create({label:"Mouse Constraint",pointA:o.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),s={type:"mouseConstraint",mouse:o,body:null,constraint:r,collisionFilter:{category:1,mask:4294967295,group:0}},a=f.extend(s,n);return m.on(e,"tick",function(){var n=i.allBodies(e.world);h.update(a,n),t(a)}),a},h.update=function(t,e){var i=t.mouse,n=t.constraint,o=t.body;if(0===i.button){if(n.bodyB)x.set(n.bodyB,!1),n.pointA=i.position;else for(var s=0;s<e.length;s++)if(o=e[s],C.contains(o.bounds,i.position)&&r.canCollide(o.collisionFilter,t.collisionFilter))for(var a=o.parts.length>1?1:0;a<o.parts.length;a++){var l=o.parts[a];if(_.contains(l.vertices,i.position)){n.pointA=i.position,n.bodyB=t.body=o,n.pointB={x:i.position.x-o.position.x,y:i.position.y-o.position.y},n.angleB=o.angle,x.set(o,!1),m.trigger(t,"startdrag",{mouse:i,body:o});break}}}else n.bodyB=t.body=null,n.pointB=null,o&&m.trigger(t,"enddrag",{mouse:i,body:o})};var t=function(t){var e=t.mouse,i=e.sourceEvents;i.mousemove&&m.trigger(t,"mousemove",{mouse:e}),i.mousedown&&m.trigger(t,"mousedown",{mouse:e}),i.mouseup&&m.trigger(t,"mouseup",{mouse:e}),g.clearSourceEvents(e)}}();var f={};!function(){f._nextId=0,f._seed=0,f.extend=function(t,e){var i,n,o;"boolean"==typeof e?(i=2,o=e):(i=1,o=!0),n=Array.prototype.slice.call(arguments,i);for(var r=0;r<n.length;r++){var s=n[r];if(s)for(var a in s)o&&s[a]&&s[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=s[a]:(t[a]=t[a]||{},f.extend(t[a],o,s[a])):t[a]=s[a]}return t},f.clone=function(t,e){return f.extend({},e,t)},f.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},f.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),n=0;n<i.length;n++)e.push(t[i[n]]);return e}for(var o in t)e.push(t[o]);return e},f.shadeColor=function(t,e){var i=parseInt(t.slice(1),16),n=Math.round(2.55*e),o=(i>>16)+n,r=(i>>8&255)+n,s=(255&i)+n;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>r?1>r?0:r:255)+(255>s?1>s?0:s:255)).toString(16).slice(1)},f.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(f.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},f.choose=function(t){return t[Math.floor(f.random()*t.length)]},f.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},f.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},f.clamp=function(t,e,i){return e>t?e:t>i?i:t},f.sign=function(t){return 0>t?-1:1},f.now=function(){var t=window.performance||{};return t.now=function(){return t.now||t.webkitNow||t.msNow||t.oNow||t.mozNow||function(){return+new Date}}(),t.now()},f.random=function(e,i){return e="undefined"!=typeof e?e:0,i="undefined"!=typeof i?i:1,e+t()*(i-e)},f.colorToNumber=function(t){return t=t.replace("#",""),3==t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},f.log=function(t,e){if(console&&console.log&&console.warn)switch(e){case"warn":console.warn("Matter.js:",t);break;case"error":console.log("Matter.js:",t)}},f.nextId=function(){return f._nextId++},f.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1};var t=function(){return f._seed=(9301*f._seed+49297)%233280,f._seed/233280}}();var v={};!function(){var t=60,o=1e3/t;v.create=function(e,i){i=f.isElement(e)?i:e,e=f.isElement(e)?e:null;var r={enabled:!0,positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],timing:{fps:t,timestamp:0,delta:o,correction:1,deltaMin:1e3/t,deltaMax:1e3/(.5*t),timeScale:1,isFixed:!1,frameRequestId:0},render:{element:e,controller:P},broadphase:{controller:s}},a=f.extend(r,i);return a.render=a.render.controller.create(a.render),a.world=n.create(a.world),a.pairs=l.create(),a.broadphase=a.broadphase.controller.create(a.broadphase),a.metrics=a.metrics||{extended:!1},a},v.update=function(t,e,n){n="undefined"!=typeof n?n:1;var o,s=t.world,d=t.timing,h=t.broadphase,f=[];d.timestamp+=e*d.timeScale,d.correction=n;var v={timestamp:t.timing.timestamp};m.trigger(t,"beforeUpdate",v);var g=i.allBodies(s),y=i.allConstraints(s);for(t.enableSleeping&&x.update(g,d.timeScale),a(g,s.gravity),c(g,e,d.timeScale,n,s.bounds),o=0;o<t.constraintIterations;o++)p.solveAll(y,d.timeScale);p.postSolveAll(g),h.controller?(s.isModified&&h.controller.clear(h),h.controller.update(h,g,t,s.isModified),f=h.pairsList):f=g;var b=h.detector(f,t),w=t.pairs,S=d.timestamp;for(l.update(w,b,S),l.removeOld(w,S),t.enableSleeping&&x.afterCollisions(w.list,d.timeScale),w.collisionStart.length>0&&m.trigger(t,"collisionStart",{pairs:w.collisionStart}),u.preSolvePosition(w.list),o=0;o<t.positionIterations;o++)u.solvePosition(w.list,d.timeScale);for(u.postSolvePosition(g),u.preSolveVelocity(w.list),o=0;o<t.velocityIterations;o++)u.solveVelocity(w.list,d.timeScale);return w.collisionActive.length>0&&m.trigger(t,"collisionActive",{pairs:w.collisionActive}),w.collisionEnd.length>0&&m.trigger(t,"collisionEnd",{pairs:w.collisionEnd}),r(g),s.isModified&&i.setModified(s,!1,!1,!0),m.trigger(t,"afterUpdate",v),t},v.render=function(t){var e={timestamp:t.timing.timestamp};m.trigger(t,"beforeRender",e),t.render.controller.world(t),m.trigger(t,"afterRender",e)},v.merge=function(t,e){if(f.extend(t,e),e.world){t.world=e.world,v.clear(t);for(var n=i.allBodies(t.world),o=0;o<n.length;o++){var r=n[o];x.set(r,!1),r.id=f.nextId()}}},v.clear=function(t){var e=t.world;l.clear(t.pairs);var n=t.broadphase;if(n.controller){var o=i.allBodies(e);n.controller.clear(n),n.controller.update(n,o,t,!0)}};var r=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},a=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.isStatic||n.isSleeping||(n.force.y+=n.mass*e.y*.001,n.force.x+=n.mass*e.x*.001)}},c=function(t,i,n,o){for(var r=0;r<t.length;r++){var s=t[r];s.isStatic||s.isSleeping||e.update(s,i,n,o)}}}();var m={};!function(){m.on=function(t,e,i){for(var n,o=e.split(" "),r=0;r<o.length;r++)n=o[r],t.events=t.events||{},t.events[n]=t.events[n]||[],t.events[n].push(i);return i},m.off=function(t,e,i){if(!e)return void(t.events={});"function"==typeof e&&(i=e,e=f.keys(t.events).join(" "));for(var n=e.split(" "),o=0;o<n.length;o++){var r=t.events[n[o]],s=[];if(i)for(var a=0;a<r.length;a++)r[a]!==i&&s.push(r[a]);t.events[n[o]]=s}},m.trigger=function(t,e,i){var n,o,r,s;if(t.events){i||(i={}),n=e.split(" ");for(var a=0;a<n.length;a++)if(o=n[a],r=t.events[o]){s=f.clone(i,!1),s.name=o,s.source=t;for(var l=0;l<r.length;l++)r[l].apply(t,[s])}}}}();var g={};!function(){g.create=function(e){var i={};return e||f.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=e||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=i.element.getAttribute("data-pixel-ratio")||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(e){var n=t(e,i.element,i.pixelRatio),o=e.changedTouches;
o&&(i.button=0,e.preventDefault()),i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=e},i.mousedown=function(e){var n=t(e,i.element,i.pixelRatio),o=e.changedTouches;o?(i.button=0,e.preventDefault()):i.button=e.button,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=e},i.mouseup=function(e){var n=t(e,i.element,i.pixelRatio),o=e.changedTouches;o&&e.preventDefault(),i.button=-1,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=e},i.mousewheel=function(t){i.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),t.preventDefault()},g.setElement(i,i.element),i},g.setElement=function(t,e){t.element=e,e.addEventListener("mousemove",t.mousemove),e.addEventListener("mousedown",t.mousedown),e.addEventListener("mouseup",t.mouseup),e.addEventListener("mousewheel",t.mousewheel),e.addEventListener("DOMMouseScroll",t.mousewheel),e.addEventListener("touchmove",t.mousemove),e.addEventListener("touchstart",t.mousedown),e.addEventListener("touchend",t.mouseup)},g.clearSourceEvents=function(t){t.sourceEvents.mousemove=null,t.sourceEvents.mousedown=null,t.sourceEvents.mouseup=null,t.sourceEvents.mousewheel=null,t.wheelDelta=0},g.setOffset=function(t,e){t.offset.x=e.x,t.offset.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y},g.setScale=function(t,e){t.scale.x=e.x,t.scale.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y};var t=function(t,e,i){var n,o,r=e.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,c=t.changedTouches;return c?(n=c[0].pageX-r.left-a,o=c[0].pageY-r.top-l):(n=t.pageX-r.left-a,o=t.pageY-r.top-l),{x:n/(e.clientWidth/e.width*i),y:o/(e.clientHeight/e.height*i)}}}();var y={};!function(){var t=60,e=t,i=1e3/t,n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(f.now())},i)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;y.run=function(t){var i,o=0,r=0,s=[],a=1;!function l(c){var u,d=t.timing,p=1;if(d.frameRequestId=n(l),t.enabled){var h={timestamp:c};m.trigger(t,"beforeTick",h),d.isFixed?u=d.delta:(u=c-i||d.delta,i=c,s.push(u),s=s.slice(-e),u=Math.min.apply(null,s),u=u<d.deltaMin?d.deltaMin:u,u=u>d.deltaMax?d.deltaMax:u,p=u/d.delta,d.delta=u),0!==a&&(p*=d.timeScale/a),0===d.timeScale&&(p=0),a=d.timeScale,r+=1,c-o>=1e3&&(d.fps=r*((c-o)/1e3),o=c,r=0),m.trigger(t,"tick",h),t.world.isModified&&t.render.controller.clear&&t.render.controller.clear(t.render),v.update(t,u,p),v.render(t),m.trigger(t,"afterTick",h)}}()},y.stop=function(t){o(t.timing.frameRequestId)}}();var x={};!function(){x._motionWakeThreshold=.18,x._motionSleepThreshold=.08,x._minBias=.9,x.update=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var o=t[n],r=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var s=Math.min(o.motion,r),a=Math.max(o.motion,r);o.motion=x._minBias*s+(1-x._minBias)*a,o.sleepThreshold>0&&o.motion<x._motionSleepThreshold*i?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&x.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}else x.set(o,!1)}},x.afterCollisions=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var o=t[n];if(o.isActive){var r=o.collision,s=r.bodyA.parent,a=r.bodyB.parent;if(!(s.isSleeping&&a.isSleeping||s.isStatic||a.isStatic)&&(s.isSleeping||a.isSleeping)){var l=s.isSleeping&&!s.isStatic?s:a,c=l===s?a:s;!l.isStatic&&c.motion>x._motionWakeThreshold*i&&x.set(l,!1)}}}},x.set=function(t,e){e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0):(t.isSleeping=!1,t.sleepCounter=0)}}();var b={};!function(){b.rectangle=function(t,i,n,o,r){r=r||{};var s={label:"Rectangle Body",position:{x:t,y:i},vertices:_.fromPath("L 0 0 L "+n+" 0 L "+n+" "+o+" L 0 "+o)};if(r.chamfer){var a=r.chamfer;s.vertices=_.chamfer(s.vertices,a.radius,a.quality,a.qualityMin,a.qualityMax),delete r.chamfer}return e.create(f.extend({},s,r))},b.trapezoid=function(t,i,n,o,r,s){s=s||{},r*=.5;var a=(1-2*r)*n,l=n*r,c=l+a,u=c+l,d={label:"Trapezoid Body",position:{x:t,y:i},vertices:_.fromPath("L 0 0 L "+l+" "+-o+" L "+c+" "+-o+" L "+u+" 0")};if(s.chamfer){var p=s.chamfer;d.vertices=_.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete s.chamfer}return e.create(f.extend({},d,s))},b.circle=function(t,e,i,n,o){n=n||{},n.label="Circle Body",o=o||25;var r=Math.ceil(Math.max(10,Math.min(o,i)));return r%2===1&&(r+=1),n.circleRadius=i,b.polygon(t,e,r,i,n)},b.polygon=function(t,i,n,o,r){if(r=r||{},3>n)return b.circle(t,i,o,r);for(var s=2*Math.PI/n,a="",l=.5*s,c=0;n>c;c+=1){var u=l+c*s,d=Math.cos(u)*o,p=Math.sin(u)*o;a+="L "+d.toFixed(3)+" "+p.toFixed(3)+" "}var h={label:"Polygon Body",position:{x:t,y:i},vertices:_.fromPath(a)};if(r.chamfer){var v=r.chamfer;h.vertices=_.chamfer(h.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete r.chamfer}return e.create(f.extend({},h,r))},b.fromVertices=function(t,i,n,o,r,s,a){var l,c,u,d,p,h,v,m,g;for(o=o||{},c=[],r="undefined"!=typeof r?r:!1,s="undefined"!=typeof s?s:.01,a="undefined"!=typeof a?a:10,window.decomp||f.log("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.","warn"),f.isArray(n[0])||(n=[n]),m=0;m<n.length;m+=1)if(d=n[m],u=_.isConvex(d),u||!window.decomp)d=u?_.clockwiseSort(d):_.hull(d),c.push({position:{x:t,y:i},vertices:d});else{var y=new decomp.Polygon;for(p=0;p<d.length;p++)y.vertices.push([d[p].x,d[p].y]);y.makeCCW(),s!==!1&&y.removeCollinearPoints(s);var x=y.quickDecomp();for(p=0;p<x.length;p++){var b=x[p],w=[];for(h=0;h<b.vertices.length;h++)w.push({x:b.vertices[h][0],y:b.vertices[h][1]});a>0&&_.area(w)<a||c.push({position:_.centre(w),vertices:w})}}for(p=0;p<c.length;p++)c[p]=e.create(f.extend(c[p],o));if(r){var S=5;for(p=0;p<c.length;p++){var k=c[p];for(h=p+1;h<c.length;h++){var E=c[h];if(C.overlaps(k.bounds,E.bounds)){var P=k.vertices,M=E.vertices;for(v=0;v<k.vertices.length;v++)for(g=0;g<E.vertices.length;g++){var T=A.magnitudeSquared(A.sub(P[(v+1)%P.length],M[g])),I=A.magnitudeSquared(A.sub(P[v],M[(g+1)%M.length]));S>T&&S>I&&(P[v].isInternal=!0,M[g].isInternal=!0)}}}}}return c.length>1?(l=e.create(f.extend({parts:c.slice(0)},o)),e.setPosition(l,{x:t,y:i}),l):c[0]}}();var w={};!function(){w.stack=function(t,n,o,r,s,a,l){for(var c,u=i.create({label:"Stack"}),d=t,p=n,h=0,f=0;r>f;f++){for(var v=0,m=0;o>m;m++){var g=l(d,p,m,f,c,h);if(g){var y=g.bounds.max.y-g.bounds.min.y,x=g.bounds.max.x-g.bounds.min.x;y>v&&(v=y),e.translate(g,{x:.5*x,y:.5*y}),d=g.bounds.max.x+s,i.addBody(u,g),c=g,h+=1}else d+=s}p+=v+a,d=t}return u},w.chain=function(t,e,n,o,r,s){for(var a=t.bodies,l=1;l<a.length;l++){var c=a[l-1],u=a[l],d=c.bounds.max.y-c.bounds.min.y,h=c.bounds.max.x-c.bounds.min.x,v=u.bounds.max.y-u.bounds.min.y,m=u.bounds.max.x-u.bounds.min.x,g={bodyA:c,pointA:{x:h*e,y:d*n},bodyB:u,pointB:{x:m*o,y:v*r}},y=f.extend(g,s);i.addConstraint(t,p.create(y))}return t.label+=" Chain",t},w.mesh=function(t,e,n,o,r){var s,a,l,c,u,d=t.bodies;for(s=0;n>s;s++){for(a=1;e>a;a++)l=d[a-1+s*e],c=d[a+s*e],i.addConstraint(t,p.create(f.extend({bodyA:l,bodyB:c},r)));if(s>0)for(a=0;e>a;a++)l=d[a+(s-1)*e],c=d[a+s*e],i.addConstraint(t,p.create(f.extend({bodyA:l,bodyB:c},r))),o&&a>0&&(u=d[a-1+(s-1)*e],i.addConstraint(t,p.create(f.extend({bodyA:u,bodyB:c},r)))),o&&e-1>a&&(u=d[a+1+(s-1)*e],i.addConstraint(t,p.create(f.extend({bodyA:u,bodyB:c},r))))}return t.label+=" Mesh",t},w.pyramid=function(t,i,n,o,r,s,a){return w.stack(t,i,n,o,r,s,function(i,s,l,c,u,d){var p=Math.min(o,Math.ceil(n/2)),h=u?u.bounds.max.x-u.bounds.min.x:0;if(!(c>p)){c=p-c;var f=c,v=n-1-c;if(!(f>l||l>v)){1===d&&e.translate(u,{x:(l+(n%2===1?1:-1))*h,y:0});var m=u?l*h:0;return a(t+m+l*r,s,l,c,u,d)}}})},w.newtonsCradle=function(t,e,n,o,r){for(var s=i.create({label:"Newtons Cradle"}),a=0;n>a;a++){var l=1.9,c=b.circle(t+a*o*l,e+r,o,{inertia:99999,restitution:1,friction:0,frictionAir:1e-4,slop:.01}),u=p.create({pointA:{x:t+a*o*l,y:e},bodyB:c});i.addBody(s,c),i.addConstraint(s,u)}return s},w.car=function(t,n,o,r,s){var a=e.nextGroup(!0),l=-20,c=.5*-o+l,u=.5*o-l,d=0,h=i.create({label:"Car"}),f=b.trapezoid(t,n,o,r,.3,{collisionFilter:{group:a},friction:.01,chamfer:{radius:10}}),v=b.circle(t+c,n+d,s,{collisionFilter:{group:a},restitution:.5,friction:.9,frictionStatic:10,slop:.5,density:.01}),m=b.circle(t+u,n+d,s,{collisionFilter:{group:a},restitution:.5,friction:.9,frictionStatic:10,slop:.5,density:.01}),g=p.create({bodyA:f,pointA:{x:c,y:d},bodyB:v,stiffness:.5}),y=p.create({bodyA:f,pointA:{x:u,y:d},bodyB:m,stiffness:.5});return i.addBody(h,f),i.addBody(h,v),i.addBody(h,m),i.addConstraint(h,g),i.addConstraint(h,y),h},w.softBody=function(t,e,i,n,o,r,s,a,l,c){l=f.extend({inertia:1/0},l),c=f.extend({stiffness:.4},c);var u=w.stack(t,e,i,n,o,r,function(t,e){return b.circle(t,e,a,l)});return w.mesh(u,i,n,s,c),u.label="Soft Body",u}}();var S={};!function(){S.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var n=(i+1)%t.length,o=A.normalise({x:t[n].y-t[i].y,y:t[i].x-t[n].x}),r=0===o.y?1/0:o.x/o.y;r=r.toFixed(3).toString(),e[r]=o}return f.values(e)},S.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),n=Math.sin(e),o=0;o<t.length;o++){var r,s=t[o];r=s.x*i-s.y*n,s.y=s.x*n+s.y*i,s.x=r}}}();var C={};!function(){C.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&C.update(e,t),e},C.update=function(t,e,i){t.min.x=Number.MAX_VALUE,t.max.x=Number.MIN_VALUE,t.min.y=Number.MAX_VALUE,t.max.y=Number.MIN_VALUE;for(var n=0;n<e.length;n++){var o=e[n];o.x>t.max.x&&(t.max.x=o.x),o.x<t.min.x&&(t.min.x=o.x),o.y>t.max.y&&(t.max.y=o.y),o.y<t.min.y&&(t.min.y=o.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},C.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},C.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},C.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},C.shift=function(t,e){var i=t.max.x-t.min.x,n=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+n}}();var E={};!function(){E.pathToVertices=function(e,i){var n,o,r,s,a,l,c,u,d,p,h=[],f=0,v=0,m=0;i=i||15;var g=function(t,e,i){var n=i%2===1&&i>1;if(!d||t!=d.x||e!=d.y){d&&n?(lx=d.x,ly=d.y):(lx=0,ly=0);var o={x:lx+t,y:ly+e};(n||!d)&&(d=o),h.push(o),v=lx+t,m=ly+e}},y=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":v=t.x,m=t.y;break;case"H":v=t.x;break;case"V":m=t.y}g(v,m,t.pathSegType)}};for(t(e),r=e.getTotalLength(),l=[],n=0;n<e.pathSegList.numberOfItems;n+=1)l.push(e.pathSegList.getItem(n));for(c=l.concat();r>f;){if(p=e.getPathSegAtLength(f),a=l[p],a!=u){for(;c.length&&c[0]!=a;)y(c.shift());u=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=e.getPointAtLength(f),g(s.x,s.y,0)}f+=i}for(n=0,o=c.length;o>n;++n)y(c[n]);return h};var t=function(t){for(var e,i,n,o,r,s,a=t.pathSegList,l=0,c=0,u=a.numberOfItems,d=0;u>d;++d){var p=a.getItem(d),h=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in p&&(l=p.x),"y"in p&&(c=p.y);else switch("x1"in p&&(n=l+p.x1),"x2"in p&&(r=l+p.x2),"y1"in p&&(o=c+p.y1),"y2"in p&&(s=c+p.y2),"x"in p&&(l+=p.x),"y"in p&&(c+=p.y),h){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(l,c,n,o,r,s),d);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(l,c,r,s),d);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(l,c,n,o),d);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(l,c,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),d);break;case"z":case"Z":l=e,c=i}("M"==h||"m"==h)&&(e=l,i=c)}}}();var A={};!function(){A.create=function(t,e){return{x:t||0,y:e||0}},A.clone=function(t){return{x:t.x,y:t.y}},A.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},A.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},A.rotate=function(t,e){var i=Math.cos(e),n=Math.sin(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},A.rotateAbout=function(t,e,i,n){var o=Math.cos(e),r=Math.sin(e);n||(n={});var s=i.x+((t.x-i.x)*o-(t.y-i.y)*r);return n.y=i.y+((t.x-i.x)*r+(t.y-i.y)*o),n.x=s,n},A.normalise=function(t){var e=A.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},A.dot=function(t,e){return t.x*e.x+t.y*e.y},A.cross=function(t,e){return t.x*e.y-t.y*e.x},A.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},A.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},A.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},A.mult=function(t,e){return{x:t.x*e,y:t.y*e}},A.div=function(t,e){return{x:t.x/e,y:t.y/e}},A.perp=function(t,e){return e=e===!0?-1:1,{x:e*-t.y,y:e*t.x}},A.neg=function(t){return{x:-t.x,y:-t.y}},A.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},A._temp=[A.create(),A.create(),A.create(),A.create(),A.create(),A.create()]}();var _={};!function(){_.create=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n],r={x:o.x,y:o.y,index:n,body:e,isInternal:!1};i.push(r)}return i},_.fromPath=function(t,e){var i=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,n=[];return t.replace(i,function(t,e,i){n.push({x:parseFloat(e),y:parseFloat(i)})}),_.create(n,e)},_.centre=function(t){for(var e,i,n,o=_.area(t,!0),r={x:0,y:0},s=0;s<t.length;s++)n=(s+1)%t.length,e=A.cross(t[s],t[n]),i=A.mult(A.add(t[s],t[n]),e),r=A.add(r,i);return A.div(r,6*o)},_.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return A.div(e,t.length)},_.area=function(t,e){for(var i=0,n=t.length-1,o=0;o<t.length;o++)i+=(t[n].x-t[o].x)*(t[n].y+t[o].y),n=o;return e?i/2:Math.abs(i)/2},_.inertia=function(t,e){for(var i,n,o=0,r=0,s=t,a=0;a<s.length;a++)n=(a+1)%s.length,i=Math.abs(A.cross(s[n],s[a])),o+=i*(A.dot(s[n],s[n])+A.dot(s[n],s[a])+A.dot(s[a],s[a])),r+=i;return e/6*(o/r)},_.translate=function(t,e,i){var n;if(i)for(n=0;n<t.length;n++)t[n].x+=e.x*i,t[n].y+=e.y*i;else for(n=0;n<t.length;n++)t[n].x+=e.x,t[n].y+=e.y;return t},_.rotate=function(t,e,i){if(0!==e){for(var n=Math.cos(e),o=Math.sin(e),r=0;r<t.length;r++){var s=t[r],a=s.x-i.x,l=s.y-i.y;s.x=i.x+(a*n-l*o),s.y=i.y+(a*o+l*n)}return t}},_.contains=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=t[(i+1)%t.length];if((e.x-n.x)*(o.y-n.y)+(e.y-n.y)*(n.x-o.x)>0)return!1}return!0},_.scale=function(t,e,i,n){if(1===e&&1===i)return t;n=n||_.centre(t);for(var o,r,s=0;s<t.length;s++)o=t[s],r=A.sub(o,n),t[s].x=n.x+r.x*e,t[s].y=n.y+r.y*i;return t},_.chamfer=function(t,e,i,n,o){e=e||[8],e.length||(e=[e]),i="undefined"!=typeof i?i:-1,n=n||2,o=o||14;for(var r=[],s=0;s<t.length;s++){var a=t[s-1>=0?s-1:t.length-1],l=t[s],c=t[(s+1)%t.length],u=e[s<e.length?s:e.length-1];if(0!==u){var d=A.normalise({x:l.y-a.y,y:a.x-l.x}),p=A.normalise({x:c.y-l.y,y:l.x-c.x}),h=Math.sqrt(2*Math.pow(u,2)),v=A.mult(f.clone(d),u),m=A.normalise(A.mult(A.add(d,p),.5)),g=A.sub(l,A.mult(m,h)),y=i;-1===i&&(y=1.75*Math.pow(u,.32)),y=f.clamp(y,n,o),y%2===1&&(y+=1);for(var x=Math.acos(A.dot(d,p)),b=x/y,w=0;y>w;w++)r.push(A.add(A.rotate(v,b*w),g))}else r.push(l)}return r},_.clockwiseSort=function(t){var e=_.mean(t);return t.sort(function(t,i){return A.angle(e,t)-A.angle(e,i)}),t},_.isConvex=function(t){var e,i,n,o,r=0,s=t.length;if(3>s)return null;for(e=0;s>e;e++)if(i=(e+1)%s,n=(e+2)%s,o=(t[i].x-t[e].x)*(t[n].y-t[i].y),o-=(t[i].y-t[e].y)*(t[n].x-t[i].x),0>o?r|=1:o>0&&(r|=2),3===r)return!1;return 0!==r?!0:null},_.hull=function(t){var e,i,n=[],o=[];for(t=t.slice(0),t.sort(function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y}),i=0;i<t.length;i++){for(e=t[i];o.length>=2&&A.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}for(i=t.length-1;i>=0;i--){for(e=t[i];n.length>=2&&A.cross3(n[n.length-2],n[n.length-1],e)<=0;)n.pop();n.push(e)}return n.pop(),o.pop(),n.concat(o)}}();var P={};!function(){P.create=function(e){var i={controller:P,element:null,canvas:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1}},n=f.extend(i,e);return n.canvas=n.canvas||t(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},1!==n.options.pixelRatio&&P.setPixelRatio(n,n.options.pixelRatio),f.isElement(n.element)?n.element.appendChild(n.canvas):f.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),n},P.setPixelRatio=function(t,i){var n=t.options,o=t.canvas;"auto"===i&&(i=e(o)),n.pixelRatio=i,o.setAttribute("data-pixel-ratio",i),o.width=n.width*i,o.height=n.height*i,o.style.width=n.width+"px",o.style.height=n.height+"px",t.context.scale(i,i)},P.world=function(t){var e,n=t.render,r=t.world,a=n.canvas,l=n.context,c=n.options,u=i.allBodies(r),d=i.allConstraints(r),p=c.wireframes?c.wireframeBackground:c.background,h=[],f=[];if(n.currentBackground!==p&&o(n,p),l.globalCompositeOperation="source-in",l.fillStyle="transparent",l.fillRect(0,0,a.width,a.height),l.globalCompositeOperation="source-over",c.hasBounds){var v=n.bounds.max.x-n.bounds.min.x,m=n.bounds.max.y-n.bounds.min.y,g=v/c.width,y=m/c.height;for(e=0;e<u.length;e++){var x=u[e];C.overlaps(x.bounds,n.bounds)&&h.push(x)}for(e=0;e<d.length;e++){var b=d[e],w=b.bodyA,S=b.bodyB,k=b.pointA,E=b.pointB;w&&(k=A.add(w.position,b.pointA)),S&&(E=A.add(S.position,b.pointB)),k&&E&&(C.contains(n.bounds,k)||C.contains(n.bounds,E))&&f.push(b)}l.scale(1/g,1/y),l.translate(-n.bounds.min.x,-n.bounds.min.y)}else f=d,h=u;!c.wireframes||t.enableSleeping&&c.showSleeping?P.bodies(t,h,l):(c.showConvexHulls&&P.bodyConvexHulls(t,h,l),P.bodyWireframes(t,h,l)),c.showBounds&&P.bodyBounds(t,h,l),(c.showAxes||c.showAngleIndicator)&&P.bodyAxes(t,h,l),c.showPositions&&P.bodyPositions(t,h,l),c.showVelocity&&P.bodyVelocity(t,h,l),c.showIds&&P.bodyIds(t,h,l),c.showSeparations&&P.separations(t,t.pairs.list,l),c.showCollisions&&P.collisions(t,t.pairs.list,l),c.showVertexNumbers&&P.vertexNumbers(t,h,l),P.constraints(f,l),c.showBroadphase&&t.broadphase.controller===s&&P.grid(t,t.broadphase,l),c.showDebug&&P.debug(t,l),c.hasBounds&&l.setTransform(c.pixelRatio,0,0,c.pixelRatio,0,0)},P.debug=function(t,e){var n=e,o=t.world,r=t.render,s=r.options,a=(i.allBodies(o),"    ");if(t.timing.timestamp-(r.debugTimestamp||0)>=500){var l="";l+="fps: "+Math.round(t.timing.fps)+a,r.debugString=l,r.debugTimestamp=t.timing.timestamp}if(r.debugString){n.font="12px Arial",n.fillStyle=s.wireframes?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)";for(var c=r.debugString.split("\n"),u=0;u<c.length;u++)n.fillText(c[u],50,50+18*u)}},P.constraints=function(t,e){for(var i=e,n=0;n<t.length;n++){var o=t[n];if(o.render.visible&&o.pointA&&o.pointB){var r=o.bodyA,s=o.bodyB;r?(i.beginPath(),i.moveTo(r.position.x+o.pointA.x,r.position.y+o.pointA.y)):(i.beginPath(),i.moveTo(o.pointA.x,o.pointA.y)),s?i.lineTo(s.position.x+o.pointB.x,s.position.y+o.pointB.y):i.lineTo(o.pointB.x,o.pointB.y),i.lineWidth=o.render.lineWidth,i.strokeStyle=o.render.strokeStyle,i.stroke()}}},P.bodyShadows=function(t,e,i){for(var n=i,o=t.render,r=0;r<e.length;r++){var s=e[r];if(s.render.visible){if(s.circleRadius)n.beginPath(),n.arc(s.position.x,s.position.y,s.circleRadius,0,2*Math.PI),n.closePath();else{n.beginPath(),n.moveTo(s.vertices[0].x,s.vertices[0].y);for(var a=1;a<s.vertices.length;a++)n.lineTo(s.vertices[a].x,s.vertices[a].y);n.closePath()}var l=s.position.x-.5*o.options.width,c=s.position.y-.2*o.options.height,u=Math.abs(l)+Math.abs(c);n.shadowColor="rgba(0,0,0,0.15)",n.shadowOffsetX=.05*l,n.shadowOffsetY=.05*c,n.shadowBlur=1+12*Math.min(1,u/1e3),n.fill(),n.shadowColor=null,n.shadowOffsetX=null,n.shadowOffsetY=null,n.shadowBlur=null}}},P.bodies=function(t,e,i){var o,r,s,a=i,l=t.render,c=l.options;for(s=0;s<e.length;s++)if(o=e[s],o.render.visible)for(k=o.parts.length>1?1:0;k<o.parts.length;k++)if(r=o.parts[k],r.render.sprite&&r.render.sprite.texture&&!c.wireframes){var u=r.render.sprite,d=n(l,u.texture);c.showSleeping&&o.isSleeping&&(a.globalAlpha=.5),a.translate(r.position.x,r.position.y),a.rotate(r.angle),a.drawImage(d,d.width*-.5*u.xScale,d.height*-.5*u.yScale,d.width*u.xScale,d.height*u.yScale),a.rotate(-r.angle),a.translate(-r.position.x,-r.position.y),c.showSleeping&&o.isSleeping&&(a.globalAlpha=1)}else{if(r.circleRadius)a.beginPath(),a.arc(r.position.x,r.position.y,r.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(r.vertices[0].x,r.vertices[0].y);for(var p=1;p<r.vertices.length;p++)a.lineTo(r.vertices[p].x,r.vertices[p].y);a.closePath()}c.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",c.showSleeping&&o.isSleeping&&(a.strokeStyle="rgba(255,255,255,0.2)"),a.stroke()):(a.fillStyle=c.showSleeping&&o.isSleeping?f.shadeColor(r.render.fillStyle,50):r.render.fillStyle,a.lineWidth=r.render.lineWidth,a.strokeStyle=r.render.strokeStyle,a.fill(),a.stroke())}},P.bodyWireframes=function(t,e,i){var n,o,r,s,a,l=i,c=t.render.options.showInternalEdges;for(l.beginPath(),r=0;r<e.length;r++)if(n=e[r],n.render.visible)for(a=n.parts.length>1?1:0;a<n.parts.length;a++){for(o=n.parts[a],l.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)!o.vertices[s-1].isInternal||c?l.lineTo(o.vertices[s].x,o.vertices[s].y):l.moveTo(o.vertices[s].x,o.vertices[s].y),o.vertices[s].isInternal&&!c&&l.moveTo(o.vertices[(s+1)%o.vertices.length].x,o.vertices[(s+1)%o.vertices.length].y);l.lineTo(o.vertices[0].x,o.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},P.bodyConvexHulls=function(t,e,i){var n,o,r,s=i;for(s.beginPath(),o=0;o<e.length;o++)if(n=e[o],n.render.visible&&1!==n.parts.length){for(s.moveTo(n.vertices[0].x,n.vertices[0].y),r=1;r<n.vertices.length;r++)s.lineTo(n.vertices[r].x,n.vertices[r].y);s.lineTo(n.vertices[0].x,n.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},P.vertexNumbers=function(t,e,i){var n,o,r,s=i;for(n=0;n<e.length;n++){var a=e[n].parts;for(r=a.length>1?1:0;r<a.length;r++){var l=a[r];for(o=0;o<l.vertices.length;o++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(n+"_"+o,l.position.x+.8*(l.vertices[o].x-l.position.x),l.position.y+.8*(l.vertices[o].y-l.position.y))}}},P.bodyBounds=function(t,e,i){var n=i,o=t.render,r=o.options;n.beginPath();for(var s=0;s<e.length;s++){var a=e[s];if(a.render.visible)for(var l=e[s].parts,c=l.length>1?1:0;c<l.length;c++){var u=l[c];n.rect(u.bounds.min.x,u.bounds.min.y,u.bounds.max.x-u.bounds.min.x,u.bounds.max.y-u.bounds.min.y)}}n.strokeStyle=r.wireframes?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.1)",n.lineWidth=1,n.stroke()},P.bodyAxes=function(t,e,i){var n,o,r,s,a=i,l=t.render,c=l.options;for(a.beginPath(),o=0;o<e.length;o++){var u=e[o],d=u.parts;if(u.render.visible)if(c.showAxes)for(r=d.length>1?1:0;r<d.length;r++)for(n=d[r],s=0;s<n.axes.length;s++){var p=n.axes[s];a.moveTo(n.position.x,n.position.y),a.lineTo(n.position.x+20*p.x,n.position.y+20*p.y)}else for(r=d.length>1?1:0;r<d.length;r++)for(n=d[r],s=0;s<n.axes.length;s++)a.moveTo(n.position.x,n.position.y),a.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2)}a.strokeStyle=c.wireframes?"indianred":"rgba(0,0,0,0.3)",a.lineWidth=1,a.stroke()},P.bodyPositions=function(t,e,i){var n,o,r,s=i,a=t.render,l=a.options;for(s.beginPath(),r=0;r<e.length;r++)if(n=e[r],n.render.visible)for(k=0;k<n.parts.length;k++)o=n.parts[k],s.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),s.closePath();for(s.fillStyle=l.wireframes?"indianred":"rgba(0,0,0,0.5)",s.fill(),s.beginPath(),r=0;r<e.length;r++)n=e[r],n.render.visible&&(s.arc(n.positionPrev.x,n.positionPrev.y,2,0,2*Math.PI,!1),s.closePath());s.fillStyle="rgba(255,165,0,0.8)",s.fill()},P.bodyVelocity=function(t,e,i){var n=i;n.beginPath();for(var o=0;o<e.length;o++){var r=e[o];r.render.visible&&(n.moveTo(r.position.x,r.position.y),n.lineTo(r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y)))}n.lineWidth=3,n.strokeStyle="cornflowerblue",n.stroke()},P.bodyIds=function(t,e,i){var n,o,r=i;for(n=0;n<e.length;n++)if(e[n].render.visible){var s=e[n].parts;for(o=s.length>1?1:0;o<s.length;o++){var a=s[o];r.font="12px Arial",r.fillStyle="rgba(255,255,255,0.5)",r.fillText(a.id,a.position.x+10,a.position.y-10)}}},P.collisions=function(t,e,i){var n,o,r,s,a=i,l=t.render.options;for(a.beginPath(),r=0;r<e.length;r++)if(n=e[r],n.isActive)for(o=n.collision,s=0;s<n.activeContacts.length;s++){var c=n.activeContacts[s],u=c.vertex;a.rect(u.x-1.5,u.y-1.5,3.5,3.5)}for(a.fillStyle=l.wireframes?"rgba(255,255,255,0.7)":"orange",a.fill(),a.beginPath(),r=0;r<e.length;r++)if(n=e[r],n.isActive&&(o=n.collision,n.activeContacts.length>0)){var d=n.activeContacts[0].vertex.x,p=n.activeContacts[0].vertex.y;2===n.activeContacts.length&&(d=(n.activeContacts[0].vertex.x+n.activeContacts[1].vertex.x)/2,p=(n.activeContacts[0].vertex.y+n.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||o.bodyA.isStatic===!0?a.moveTo(d-8*o.normal.x,p-8*o.normal.y):a.moveTo(d+8*o.normal.x,p+8*o.normal.y),a.lineTo(d,p)}a.strokeStyle=l.wireframes?"rgba(255,165,0,0.7)":"orange",a.lineWidth=1,a.stroke()},P.separations=function(t,e,i){var n,o,r,s,a,l=i,c=t.render.options;for(l.beginPath(),a=0;a<e.length;a++)if(n=e[a],n.isActive){o=n.collision,r=o.bodyA,s=o.bodyB;var u=1;s.isStatic||r.isStatic||(u=.5),s.isStatic&&(u=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x-o.penetration.x*u,s.position.y-o.penetration.y*u),u=1,s.isStatic||r.isStatic||(u=.5),r.isStatic&&(u=0),l.moveTo(r.position.x,r.position.y),l.lineTo(r.position.x+o.penetration.x*u,r.position.y+o.penetration.y*u)}l.strokeStyle=c.wireframes?"rgba(255,165,0,0.5)":"orange",l.stroke()},P.grid=function(t,e,i){var n=i,o=t.render.options;n.strokeStyle=o.wireframes?"rgba(255,180,0,0.1)":"rgba(255,180,0,0.5)",n.beginPath();for(var r=f.keys(e.buckets),s=0;s<r.length;s++){var a=r[s];if(!(e.buckets[a].length<2)){var l=a.split(",");n.rect(.5+parseInt(l[0],10)*e.bucketWidth,.5+parseInt(l[1],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}n.lineWidth=1,n.stroke()},P.inspector=function(t,e){var i,n=t.engine,o=t.selected,r=n.render,s=r.options;if(s.hasBounds){var a=r.bounds.max.x-r.bounds.min.x,l=r.bounds.max.y-r.bounds.min.y,c=a/r.options.width,u=l/r.options.height;e.scale(1/c,1/u),e.translate(-r.bounds.min.x,-r.bounds.min.y)}for(var d=0;d<o.length;d++){var p=o[d].data;switch(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.9)",e.setLineDash([1,2]),p.type){case"body":i=p.bounds,e.beginPath(),e.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),e.closePath(),e.stroke();break;case"constraint":var h=p.pointA;p.bodyA&&(h=p.pointB),e.beginPath(),e.arc(h.x,h.y,10,0,2*Math.PI),e.closePath(),e.stroke()}e.setLineDash([0]),e.translate(-.5,-.5)}null!==t.selectStart&&(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.6)",e.fillStyle="rgba(255,165,0,0.1)",i=t.selectBounds,e.beginPath(),e.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),e.closePath(),e.stroke(),e.fill(),e.translate(-.5,-.5)),s.hasBounds&&e.setTransform(1,0,0,1,0,0)};var t=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},e=function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/n},n=function(t,e){var i=t.textures[e];return i?i:(i=t.textures[e]=new Image,i.src=e,i)},o=function(t,e){var i=e;/(jpg|gif|png)$/.test(e)&&(i="url("+e+")"),t.canvas.style.background=i,t.canvas.style.backgroundSize="contain",t.currentBackground=e}}();var M={};!function(){M.create=function(t){var e={controller:M,element:null,canvas:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},i=f.extend(e,t),n=!i.options.wireframes&&"transparent"===i.options.background;return i.context=new PIXI.WebGLRenderer(i.options.width,i.options.height,{view:i.canvas,transparent:n,antialias:!0,backgroundColor:t.background}),i.canvas=i.context.view,i.container=new PIXI.Container,i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.options.width,y:i.options.height}},i.textures={},i.sprites={},i.primitives={},i.spriteContainer=new PIXI.Container,i.container.addChild(i.spriteContainer),f.isElement(i.element)?i.element.appendChild(i.canvas):f.log('No "render.element" passed, "render.canvas" was not inserted into document.',"warn"),i.canvas.oncontextmenu=function(){return!1},i.canvas.onselectstart=function(){return!1},i},M.clear=function(t){for(var e=t.container,i=t.spriteContainer;e.children[0];)e.removeChild(e.children[0]);for(;i.children[0];)i.removeChild(i.children[0]);var n=t.sprites["bg-0"];t.textures={},t.sprites={},t.primitives={},t.sprites["bg-0"]=n,n&&e.addChildAt(n,0),t.container.addChild(t.spriteContainer),t.currentBackground=null,e.scale.set(1,1),e.position.set(0,0)},M.setBackground=function(t,e){if(t.currentBackground!==e){var i=e.indexOf&&-1!==e.indexOf("#"),o=t.sprites["bg-0"];if(i){var r=f.colorToNumber(e);t.context.backgroundColor=r,o&&t.container.removeChild(o)}else if(!o){var s=n(t,e);o=t.sprites["bg-0"]=new PIXI.Sprite(s),o.position.x=0,o.position.y=0,t.container.addChildAt(o,0)}t.currentBackground=e}},M.world=function(t){var e,n=t.render,o=t.world,r=n.context,s=n.container,a=n.options,l=i.allBodies(o),c=i.allConstraints(o),u=[];a.wireframes?M.setBackground(n,a.wireframeBackground):M.setBackground(n,a.background);var d=n.bounds.max.x-n.bounds.min.x,p=n.bounds.max.y-n.bounds.min.y,h=d/n.options.width,f=p/n.options.height;if(a.hasBounds){for(e=0;e<l.length;e++){var v=l[e];v.render.sprite.visible=C.overlaps(v.bounds,n.bounds)}for(e=0;e<c.length;e++){var m=c[e],g=m.bodyA,y=m.bodyB,x=m.pointA,b=m.pointB;g&&(x=A.add(g.position,m.pointA)),y&&(b=A.add(y.position,m.pointB)),x&&b&&(C.contains(n.bounds,x)||C.contains(n.bounds,b))&&u.push(m)}s.scale.set(1/h,1/f),s.position.set(-n.bounds.min.x*(1/h),-n.bounds.min.y*(1/f))}else u=c;for(e=0;e<l.length;e++)M.body(t,l[e]);for(e=0;e<u.length;e++)M.constraint(t,u[e]);r.render(s)},M.constraint=function(t,e){var i=t.render,n=e.bodyA,o=e.bodyB,r=e.pointA,s=e.pointB,a=i.container,l=e.render,c="c-"+e.id,u=i.primitives[c];return u||(u=i.primitives[c]=new PIXI.Graphics),l.visible&&e.pointA&&e.pointB?(-1===f.indexOf(a.children,u)&&a.addChild(u),u.clear(),u.beginFill(0,0),u.lineStyle(l.lineWidth,f.colorToNumber(l.strokeStyle),1),n?u.moveTo(n.position.x+r.x,n.position.y+r.y):u.moveTo(r.x,r.y),o?u.lineTo(o.position.x+s.x,o.position.y+s.y):u.lineTo(s.x,s.y),void u.endFill()):void u.clear()},M.body=function(i,n){var o=i.render,r=n.render;if(r.visible)if(r.sprite&&r.sprite.texture){var s="b-"+n.id,a=o.sprites[s],l=o.spriteContainer;a||(a=o.sprites[s]=t(o,n)),-1===f.indexOf(l.children,a)&&l.addChild(a),a.position.x=n.position.x,a.position.y=n.position.y,a.rotation=n.angle,a.scale.x=r.sprite.xScale||1,a.scale.y=r.sprite.yScale||1}else{var c="b-"+n.id,u=o.primitives[c],d=o.container;u||(u=o.primitives[c]=e(o,n),u.initialAngle=n.angle),-1===f.indexOf(d.children,u)&&d.addChild(u),u.position.x=n.position.x,u.position.y=n.position.y,u.rotation=n.angle-u.initialAngle
}};var t=function(t,e){var i=e.render,o=i.sprite.texture,r=n(t,o),s=new PIXI.Sprite(r);return s.anchor.x=.5,s.anchor.y=.5,s},e=function(t,e){var i,n=e.render,o=t.options,r=new PIXI.Graphics,s=f.colorToNumber(n.fillStyle),a=f.colorToNumber(n.strokeStyle),l=f.colorToNumber(n.strokeStyle),c=f.colorToNumber("#bbb"),u=f.colorToNumber("#CD5C5C");r.clear();for(var d=e.parts.length>1?1:0;d<e.parts.length;d++){i=e.parts[d],o.wireframes?(r.beginFill(0,0),r.lineStyle(1,c,1)):(r.beginFill(s,1),r.lineStyle(n.lineWidth,a,1)),r.moveTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y);for(var p=1;p<i.vertices.length;p++)r.lineTo(i.vertices[p].x-e.position.x,i.vertices[p].y-e.position.y);r.lineTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y),r.endFill(),(o.showAngleIndicator||o.showAxes)&&(r.beginFill(0,0),o.wireframes?r.lineStyle(1,u,1):r.lineStyle(1,l),r.moveTo(i.position.x-e.position.x,i.position.y-e.position.y),r.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2-e.position.x,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2-e.position.y),r.endFill())}return r},n=function(t,e){var i=t.textures[e];return i||(i=t.textures[e]=PIXI.Texture.fromImage(e)),i}}(),n.add=i.add,n.remove=i.remove,n.addComposite=i.addComposite,n.addBody=i.addBody,n.addConstraint=i.addConstraint,n.clear=i.clear,v.run=y.run,t.Body=e,t.Composite=i,t.World=n,t.Contact=o,t.Detector=r,t.Grid=s,t.Pairs=l,t.Pair=a,t.Resolver=u,t.SAT=d,t.Constraint=p,t.MouseConstraint=h,t.Common=f,t.Engine=v,t.Mouse=g,t.Sleeping=x,t.Bodies=b,t.Composites=w,t.Axes=S,t.Bounds=C,t.Vector=A,t.Vertices=_,t.Render=P,t.RenderPixi=M,t.Events=m,t.Query=c,t.Runner=y,t.Svg=E,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Matter=t),"function"==typeof define&&define.amd&&define("Matter",[],function(){return t}),"object"==typeof window&&"object"==typeof window.document&&(window.Matter=t)}(),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Slideout=t()}}(function(){return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){"use strict";function i(t,e){for(var i in e)e[i]&&(t[i]=e[i]);return t}function n(t,e){t.prototype=i(t.prototype||{},e.prototype)}function o(t){t=t||{},this._startOffsetX=0,this._currentOffsetX=0,this._opening=!1,this._moved=!1,this._opened=!1,this._preventOpen=!1,this._touch=void 0===t.touch?!0:t.touch&&!0,this.panel=t.panel,this.menu=t.menu,this.panel.className+=" slideout-panel",this.menu.className+=" slideout-menu",this._fx=t.fx||"ease",this._duration=parseInt(t.duration,10)||300,this._tolerance=parseInt(t.tolerance,10)||70,this._padding=this._translateTo=parseInt(t.padding,10)||256,this._orientation="right"===t.side?-1:1,this._translateTo*=this._orientation,this._touch&&this._initTouchEvents()}var r,s=t("decouple"),a=t("emitter"),l=!1,c=window.document,u=c.documentElement,d=window.navigator.msPointerEnabled,p={start:d?"MSPointerDown":"touchstart",move:d?"MSPointerMove":"touchmove",end:d?"MSPointerUp":"touchend"},h=function(){var t=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,e=c.getElementsByTagName("script")[0].style;for(var i in e)if(t.test(i))return"-"+i.match(t)[0].toLowerCase()+"-";return"WebkitOpacity"in e?"-webkit-":"KhtmlOpacity"in e?"-khtml-":""}();n(o,a),o.prototype.open=function(){var t=this;return this.emit("beforeopen"),-1===u.className.search("slideout-open")&&(u.className+=" slideout-open"),this._setTransition(),this._translateXTo(this._translateTo),this._opened=!0,setTimeout(function(){t.panel.style.transition=t.panel.style["-webkit-transition"]="",t.emit("open")},this._duration+50),this},o.prototype.close=function(){var t=this;return this.isOpen()||this._opening?(this.emit("beforeclose"),this._setTransition(),this._translateXTo(0),this._opened=!1,setTimeout(function(){u.className=u.className.replace(/ slideout-open/,""),t.panel.style.transition=t.panel.style["-webkit-transition"]=t.panel.style[h+"transform"]=t.panel.style.transform="",t.emit("close")},this._duration+50),this):this},o.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},o.prototype.isOpen=function(){return this._opened},o.prototype._translateXTo=function(t){this._currentOffsetX=t,this.panel.style[h+"transform"]=this.panel.style.transform="translate3d("+t+"px, 0, 0)"},o.prototype._setTransition=function(){this.panel.style[h+"transition"]=this.panel.style.transition=h+"transform "+this._duration+"ms "+this._fx},o.prototype._initTouchEvents=function(){var t=this;s(c,"scroll",function(){t._moved||(clearTimeout(r),l=!0,r=setTimeout(function(){l=!1},250))}),c.addEventListener(p.move,function(e){t._moved&&e.preventDefault()}),this.panel.addEventListener(p.start,function(e){"undefined"!=typeof e.touches&&(t._moved=!1,t._opening=!1,t._startOffsetX=e.touches[0].pageX,t._preventOpen=!t.isOpen()&&0!==t.menu.clientWidth)}),this.panel.addEventListener("touchcancel",function(){t._moved=!1,t._opening=!1}),this.panel.addEventListener(p.end,function(){t._moved&&(t._opening&&Math.abs(t._currentOffsetX)>t._tolerance?t.open():t.close()),t._moved=!1}),this.panel.addEventListener(p.move,function(e){if(!l&&!t._preventOpen&&"undefined"!=typeof e.touches){var i=e.touches[0].clientX-t._startOffsetX,n=t._currentOffsetX=i;if(!(Math.abs(n)>t._padding)&&Math.abs(i)>20){t._opening=!0;var o=i*t._orientation;if(t._opened&&o>0||!t._opened&&0>o)return;0>=o&&(n=i+t._padding*t._orientation,t._opening=!1),t._moved||-1!==u.className.search("slideout-open")||(u.className+=" slideout-open"),t.panel.style[h+"transform"]=t.panel.style.transform="translate3d("+n+"px, 0, 0)",t.emit("translate",n),t._moved=!0}}})},e.exports=o},{decouple:2,emitter:3}],2:[function(t,e){"use strict";function i(t,e,i){function o(t){a=t,r()}function r(){l||(n(s),l=!0)}function s(){i.call(t,a),l=!1}var a,l=!1;t.addEventListener(e,o,!1)}var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();e.exports=i},{}],3:[function(t,e,i){"use strict";var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};i.__esModule=!0;var o=function(){function t(){n(this,t)}return t.prototype.on=function(t,e){return this._eventCollection=this._eventCollection||{},this._eventCollection[t]=this._eventCollection[t]||[],this._eventCollection[t].push(e),this},t.prototype.once=function e(t,i){function n(){e.off(t,n),i.apply(this,arguments)}var e=this;return n.listener=i,this.on(t,n),this},t.prototype.off=function(t,e){var i=void 0;return this._eventCollection&&(i=this._eventCollection[t])?(i.forEach(function(t,n){(t===e||t.listener===e)&&i.splice(n,1)}),0===i.length&&delete this._eventCollection[t],this):this},t.prototype.emit=function i(t){for(var e=this,n=arguments.length,o=Array(n>1?n-1:0),r=1;n>r;r++)o[r-1]=arguments[r];var i=void 0;return this._eventCollection&&(i=this._eventCollection[t])?(i=i.slice(0),i.forEach(function(t){return t.apply(e,o)}),this):this},t}();i["default"]=o,e.exports=i["default"]},{}]},{},[1])(1)}),/*!
 * Flickity PACKAGED v1.0.2
 * Touch, responsive, flickable galleries
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * http://flickity.metafizzy.co
 * Copyright 2015 Metafizzy
 */
function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var s=n.call(arguments,1),a=0,l=this.length;l>a;a++){var c=this[a],u=t.data(c,e);if(u)if(t.isFunction(u[o])&&"_"!==o.charAt(0)){var d=u[o].apply(u,s);if(void 0!==d)return d}else r("no such method '"+o+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),/*!
 * classie v1.0.1
 * class helper functions
 * from bonzo https://github.com/ded/bonzo
 * MIT license
 *
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
function(t){function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){var i=n(t,e)?r:o;i(t,e)}var n,o,r;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},r=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},o=function(t,e){n(t,e)||(t.className=t.className+" "+e)},r=function(t,i){t.className=t.className.replace(e(i)," ")});var s={hasClass:n,addClass:o,removeClass:r,toggleClass:i,has:n,add:o,remove:r,toggle:i};"function"==typeof define&&define.amd?define("classie/classie",s):"object"==typeof exports?module.exports=s:t.classie=s}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,r=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),r="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(n=e(r[o],i),-1!==n&&r[o].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,r,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].length;n--;)i=s[o][n],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:o.EventEmitter=t}.call(this),/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(window),/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=i.length;r>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */
function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){var n=s[e];t[n]=0}return t}function o(i){function o(){if(!p){p=!0;var n=t.getComputedStyle;if(c=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),u=i("boxSizing")){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[u]="border-box";var s=document.body||document.documentElement;s.appendChild(o);var a=c(o);d=200===e(a.width),s.removeChild(o)}}}function a(t){if(o(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=c(t);if("none"===i.display)return n();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var a=r.isBorderBox=!(!u||!i[u]||"border-box"!==i[u]),p=0,h=s.length;h>p;p++){var f=s[p],v=i[f];v=l(t,v);var m=parseFloat(v);r[f]=isNaN(m)?0:m}var g=r.paddingLeft+r.paddingRight,y=r.paddingTop+r.paddingBottom,x=r.marginLeft+r.marginRight,b=r.marginTop+r.marginBottom,w=r.borderLeftWidth+r.borderRightWidth,S=r.borderTopWidth+r.borderBottomWidth,C=a&&d,k=e(i.width);k!==!1&&(r.width=k+(C?0:g+w));var E=e(i.height);return E!==!1&&(r.height=E+(C?0:y+S)),r.innerWidth=r.width-(g+w),r.innerHeight=r.height-(y+S),r.outerWidth=r.width+x,r.outerHeight=r.height+b,r}}function l(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var n=e.style,o=n.left,r=e.runtimeStyle,s=r&&r.left;return s&&(r.left=e.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=o,s&&(r.left=s),i}var c,u,d,p=!1;return a}var r="undefined"==typeof console?i:function(t){console.error(t)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("desandro-get-style-property")):t.getSize=o(t.getStyleProperty)}(window),/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||n()}function n(){e.isReady=!0;for(var t=0,i=s.length;i>t;t++){var n=s[t];n()}}function o(o){return"complete"===r.readyState?n():(o.bind(r,"DOMContentLoaded",i),o.bind(r,"readystatechange",i),o.bind(t,"load",i)),e}var r=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],o):"object"==typeof exports?module.exports=o(require("eventie")):t.docReady=o(t.eventie)}(window),function(t){function e(t,e){return t[s](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),o=0,r=n.length;r>o;o++)if(n[o]===t)return!0;return!1}function o(t,n){return i(t),e(t,n)}var r,s=function(){if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;n>i;i++){var o=e[i],r=o+"MatchesSelector";if(t[r])return r}}();if(s){var a=document.createElement("div"),l=e(a,"div");r=l?e:o}else r=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):"object"==typeof exports?module.exports=r:window.matchesSelector=r}(Element.prototype),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("doc-ready"),require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.docReady,t.matchesSelector)}(window,function(t,e,i){var n={};n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.modulo=function(t,e){return(t%e+e)%e};var o=Object.prototype.toString;n.isArray=function(t){return"[object Array]"==o.call(t)},n.makeArray=function(t){var e=[];if(n.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,o=t.length;o>i;i++)e.push(t[i]);else e.push(t);return e},n.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},n.removeFrom=function(t,e){var i=n.indexOf(t,e);-1!=i&&t.splice(i,1)},n.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1==t.nodeType&&"string"==typeof t.nodeName},n.setText=function(){function t(t,i){e=e||(void 0!==document.documentElement.textContent?"textContent":"innerText"),t[e]=i}var e;return t}(),n.getParent=function(t,e){for(;t!=document.body;)if(t=t.parentNode,i(t,e))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,e){t=n.makeArray(t);for(var o=[],r=0,s=t.length;s>r;r++){var a=t[r];if(n.isElement(a))if(e){i(a,e)&&o.push(a);for(var l=a.querySelectorAll(e),c=0,u=l.length;u>c;c++)o.push(l[c])}else o.push(a)}return o},n.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,e),delete r[o]},i||100)}},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var r=t.console;return n.htmlInit=function(i,o){e(function(){for(var e=n.toDashed(o),s=document.querySelectorAll(".js-"+e),a="data-"+e+"-options",l=0,c=s.length;c>l;l++){var u,d=s[l],p=d.getAttribute(a);try{u=p&&JSON.parse(p)}catch(h){r&&r.error("Error parsing "+a+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+h);continue}var f=new i(d,u),v=t.jQuery;v&&v.data(d,o,f)}})},n}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n="attachEvent"in t;return i.prototype.create=function(){this.element.style.position="absolute",n&&this.element.setAttribute("unselectable","on"),this.x=0,this.shift=0},i.prototype.destroy=function(){this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},i.prototype.getSize=function(){this.size=e(this.element)},i.prototype.setPosition=function(t){this.x=t,this.setDefaultTarget(),this.renderPosition(t)},i.prototype.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},i.prototype.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},i.prototype.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},i.prototype.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["get-style-property/get-style-property","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("desandro-get-style-property"),require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.getStyleProperty,t.fizzyUIUtils))}(window,function(t,e,i){for(var n,o=0,r="webkit moz ms o".split(" "),s=t.requestAnimationFrame,a=t.cancelAnimationFrame,l=0;l<r.length&&(!s||!a);l++)n=r[l],s=s||t[n+"RequestAnimationFrame"],a=a||t[n+"CancelAnimationFrame"]||t[n+"CancelRequestAnimationFrame"];s&&a||(s=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-o)),r=t.setTimeout(function(){e(i+n)},n);return o=i+n,r},a=function(e){t.clearTimeout(e)});var c={};c.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},c.animate=function(){this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;s(function(){e.animate()})}};var u=e("transform"),d=!!e("perspective");return c.positionSlider=function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=i.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),t+=this.cursorPosition,t=this.options.rightToLeft&&u?-t:t;var e=this.getPositionValue(t);u?this.slider.style[u]=d&&this.isAnimating?"translate3d("+e+",0,0)":"translateX("+e+")":this.slider.style[this.originSide]=e},c.positionSliderAtSelected=function(){if(this.cells.length){var t=this.cells[this.selectedIndex];this.x=-t.target,this.positionSlider()}},c.getPositionValue=function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},c.settle=function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,d&&this.positionSlider(),this.dispatchEvent("settle"))},c.shiftWrapCells=function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},c._shiftCells=function(t,e,i){for(var n=0,o=t.length;o>n;n++){var r=t[n],s=e>0?i:0;r.wrapShift(s),e-=r.size.outerWidth}},c._unshiftCells=function(t){if(t&&t.length)for(var e=0,i=t.length;i>e;e++)t[e].wrapShift(0)},c.integratePhysics=function(){this.velocity+=this.accel,this.x+=this.velocity,this.velocity*=this.getFrictionFactor(),this.accel=0},c.applyForce=function(t){this.accel+=t},c.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},c.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},c.applySelectedAttraction=function(){var t=this.cells.length;if(!this.isPointerDown&&!this.isFreeScrolling&&t){var e=this.cells[this.selectedIndex],i=this.options.wrapAround&&t>1?this.slideableWidth*Math.floor(this.selectedIndex/t):0,n=-1*(e.target+i)-this.x,o=n*this.options.selectedAttraction;this.applyForce(o)}},c}),/*!
 * Flickity v1.0.2
 * Touch, responsive, flickable galleries
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * http://flickity.metafizzy.co
 * Copyright 2015 Metafizzy
 */
function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-size/get-size","fizzy-ui-utils/utils","./cell","./animate"],function(i,n,o,r,s,a,l){return e(t,i,n,o,r,s,a,l)});else if("object"==typeof exports)module.exports=e(t,require("desandro-classie"),require("wolfy87-eventemitter"),require("eventie"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.classie,t.EventEmitter,t.eventie,t.getSize,t.fizzyUIUtils,i.Cell,i.animatePrototype)}}(window,function(t,e,i,n,o,r,s,a){function l(t,e){for(t=r.makeArray(t);t.length;)e.appendChild(t.shift())}function c(t,e){var i=r.getQueryElement(t);return i?(this.element=i,u&&(this.$element=u(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(e),void this._create()):void(p&&p.error("Bad element for Flickity: "+(i||t)))}var u=t.jQuery,d=t.getComputedStyle,p=t.console,h=0,f={};c.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},c.createMethods=[],r.extend(c.prototype,i.prototype),c.prototype._create=function(){var e=this.guid=++h;this.element.flickityGUID=e,f[e]=this,this.selectedIndex=this.options.initialIndex||0,this.restingFrames=0,this.x=0,this.velocity=0,this.accel=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",c.setUnselectable(this.viewport),this._createSlider(),(this.options.resize||this.options.watchCSS)&&(n.bind(t,"resize",this),this.isResizeBound=!0);for(var i=0,o=c.createMethods.length;o>i;i++){var r=c.createMethods[i];this[r]()}this.options.watchCSS?this.watchCSS():this.activate()},c.prototype.option=function(t){r.extend(this.options,t)},c.prototype.activate=function(){if(!this.isActive){this.isActive=!0,e.add(this.element,"flickity-enabled"),this.options.rightToLeft&&e.add(this.element,"flickity-rtl");var t=this._filterFindCellElements(this.element.children);l(t,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.getSize(),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,n.bind(this.element,"keydown",this)),this.emit("activate"),this.positionSliderAtSelected(),this.select(this.selectedIndex)}},c.prototype._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},c.prototype._filterFindCellElements=function(t){return r.filterFindElements(t,this.options.cellSelector)},c.prototype.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},c.prototype._makeCells=function(t){for(var e=this._filterFindCellElements(t),i=[],n=0,o=e.length;o>n;n++){var r=e[n],a=new s(r,this);i.push(a)}return i},c.prototype.getLastCell=function(){return this.cells[this.cells.length-1]},c.prototype.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},c.prototype._positionCells=function(t){this.maxCellHeight=t?this.maxCellHeight||0:0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n,o=this.cells.length,r=t;o>r;r++)n=this.cells[r],n.setPosition(e),e+=n.size.outerWidth,this.maxCellHeight=Math.max(n.size.outerHeight,this.maxCellHeight);this.slideableWidth=e,this._containCells()},c.prototype._sizeCells=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];n.getSize()}},c.prototype._init=c.prototype.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},c.prototype.getSize=function(){this.size=o(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var v={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};c.prototype.setCellAlign=function(){var t=v[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},c.prototype.setGallerySize=function(){this.options.setGallerySize&&(this.viewport.style.height=this.maxCellHeight+"px")},c.prototype._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},c.prototype._getGapCells=function(t,e,i){for(var n=[];t>0;){var o=this.cells[e];if(!o)break;n.push(o),e+=i,t-=o.size.outerWidth}return n},c.prototype._containCells=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length)for(var t=this.options.rightToLeft?"marginRight":"marginLeft",e=this.options.rightToLeft?"marginLeft":"marginRight",i=this.cells[0].size[t],n=this.getLastCell(),o=this.slideableWidth-n.size[e],r=o-this.size.innerWidth*(1-this.cellAlign),s=o<this.size.innerWidth,a=0,l=this.cells.length;l>a;a++){var c=this.cells[a];c.setDefaultTarget(),s?c.target=o*this.cellAlign:(c.target=Math.max(c.target,this.cursorPosition+i),c.target=Math.min(c.target,r))}},c.prototype.dispatchEvent=function(t,e,i){var n=[e].concat(i);if(this.emitEvent(t,n),u&&this.$element)if(e){var o=u.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},c.prototype.select=function(t,e){if(this.isActive){var i=this.cells.length;this.options.wrapAround&&i>1&&(0>t?this.x-=this.slideableWidth:t>=i&&(this.x+=this.slideableWidth)),(this.options.wrapAround||e)&&(t=r.modulo(t,i)),this.cells[t]&&(this.selectedIndex=t,this.setSelectedCell(),this.startAnimation(),this.dispatchEvent("cellSelect"))}},c.prototype.previous=function(t){this.select(this.selectedIndex-1,t)},c.prototype.next=function(t){this.select(this.selectedIndex+1,t)},c.prototype.setSelectedCell=function(){this._removeSelectedCellClass(),this.selectedCell=this.cells[this.selectedIndex],this.selectedElement=this.selectedCell.element,e.add(this.selectedElement,"is-selected")},c.prototype._removeSelectedCellClass=function(){this.selectedCell&&e.remove(this.selectedCell.element,"is-selected")},c.prototype.getCell=function(t){for(var e=0,i=this.cells.length;i>e;e++){var n=this.cells[e];if(n.element==t)return n}},c.prototype.getCells=function(t){t=r.makeArray(t);for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],s=this.getCell(o);s&&e.push(s)}return e},c.prototype.getCellElements=function(){for(var t=[],e=0,i=this.cells.length;i>e;e++)t.push(this.cells[e].element);return t},c.prototype.getParentCell=function(t){var e=this.getCell(t);return e?e:(t=r.getParent(t,".flickity-slider > *"),this.getCell(t))},c.prototype.uiChange=function(){this.emit("uiChange")},c.prototype.childUIPointerDown=function(t){this.emitEvent("childUIPointerDown",[t])},c.prototype.onresize=function(){this.watchCSS(),this.resize()},r.debounceMethod(c,"onresize",150),c.prototype.resize=function(){this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=r.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.positionSliderAtSelected())};var m=c.supportsConditionalCSS=function(){var t;return function(){if(void 0!==t)return t;if(!d)return void(t=!1);var e=document.createElement("style"),i=document.createTextNode('body:after { content: "foo"; display: none; }');e.appendChild(i),document.head.appendChild(e);var n=d(document.body,":after").content;return t=-1!=n.indexOf("foo"),document.head.removeChild(e),t}}();c.prototype.watchCSS=function(){var t=this.options.watchCSS;if(t){var e=m();if(!e){var i="fallbackOn"==t?"activate":"deactivate";return void this[i]()}var n=d(this.element,":after").content;-1!=n.indexOf("flickity")?this.activate():this.deactivate()}},c.prototype.onkeydown=function(t){if(this.options.accessibility&&(!document.activeElement||document.activeElement==this.element))if(37==t.keyCode){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()}else if(39==t.keyCode){var i=this.options.rightToLeft?"previous":"next";this.uiChange(),this[i]()}},c.prototype.deactivate=function(){if(this.isActive){e.remove(this.element,"flickity-enabled"),e.remove(this.element,"flickity-rtl");for(var t=0,i=this.cells.length;i>t;t++){var o=this.cells[t];o.destroy()}this._removeSelectedCellClass(),this.element.removeChild(this.viewport),l(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),n.unbind(this.element,"keydown",this)),this.isActive=!1,this.emit("deactivate")}},c.prototype.destroy=function(){this.deactivate(),this.isResizeBound&&n.unbind(t,"resize",this),this.emit("destroy"),u&&this.$element&&u.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},r.extend(c.prototype,a);var g="attachEvent"in t;return c.setUnselectable=function(t){g&&t.setAttribute("unselectable","on")},c.data=function(t){t=r.getQueryElement(t);var e=t&&t.flickityGUID;return e&&f[e]},r.htmlInit(c,"flickity"),u&&u.bridget&&u.bridget("flickity",c),c.Cell=s,c}),/*!
 * Unipointer v1.1.0
 * base class for doing one thing with pointer event
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.Unipointer=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(){}function o(){}o.prototype=new e,o.prototype.bindStartEvent=function(t){this._bindStartEvent(t,!0)},o.prototype.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},o.prototype._bindStartEvent=function(e,n){n=void 0===n?!0:!!n;var o=n?"bind":"unbind";t.navigator.pointerEnabled?i[o](e,"pointerdown",this):t.navigator.msPointerEnabled?i[o](e,"MSPointerDown",this):(i[o](e,"mousedown",this),i[o](e,"touchstart",this))},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.getTouch=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];if(n.identifier==this.pointerIdentifier)return n}},o.prototype.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},o.prototype.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},o.prototype.onMSPointerDown=o.prototype.onpointerdown=function(t){this._pointerDown(t,t)},o.prototype._pointerDown=function(t,e){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},o.prototype.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var r={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return o.prototype._bindPostStartEvents=function(e){if(e){for(var n=r[e.type],o=e.preventDefault?t:document,s=0,a=n.length;a>s;s++){var l=n[s];i.bind(o,l,this)}this._boundPointerEvents={events:n,node:o}}},o.prototype._unbindPostStartEvents=function(){var t=this._boundPointerEvents;if(t&&t.events){for(var e=0,n=t.events.length;n>e;e++){var o=t.events[e];i.unbind(t.node,o,this)}delete this._boundPointerEvents}},o.prototype.onmousemove=function(t){this._pointerMove(t,t)},o.prototype.onMSPointerMove=o.prototype.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},o.prototype.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},o.prototype._pointerMove=function(t,e){this.pointerMove(t,e)},o.prototype.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},o.prototype.onmouseup=function(t){this._pointerUp(t,t)},o.prototype.onMSPointerUp=o.prototype.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},o.prototype.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},o.prototype._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},o.prototype.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},o.prototype._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},o.prototype.pointerDone=n,o.prototype.onMSPointerCancel=o.prototype.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},o.prototype.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},o.prototype._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},o.prototype.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},o.getPointerPoint=function(t){return{x:void 0!==t.pageX?t.pageX:t.clientX,y:void 0!==t.pageY?t.pageY:t.clientY}},o}),/*!
 * Unidragger v1.1.3
 * Draggable base class
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["eventie/eventie","unipointer/unipointer"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("unipointer")):t.Unidragger=e(t,t.eventie,t.Unipointer)}(window,function(t,e,i){function n(){}function o(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function r(){}function s(){return!1}r.prototype=new i,r.prototype.bindHandles=function(){this._bindHandles(!0)},r.prototype.unbindHandles=function(){this._bindHandles(!1)};var a=t.navigator;r.prototype._bindHandles=function(t){t=void 0===t?!0:!!t;var i;i=a.pointerEnabled?function(e){e.style.touchAction=t?"none":""}:a.msPointerEnabled?function(e){e.style.msTouchAction=t?"none":""}:function(){t&&c(s)};for(var n=t?"bind":"unbind",o=0,r=this.handles.length;r>o;o++){var s=this.handles[o];this._bindStartEvent(s,t),i(s),e[n](s,"click",this)}};var l="attachEvent"in document.documentElement,c=l?function(t){"IMG"==t.nodeName&&(t.ondragstart=s);for(var e=t.querySelectorAll("img"),i=0,n=e.length;n>i;i++){var o=e[i];o.ondragstart=s}}:n;return r.prototype.pointerDown=function(t,e){this._dragPointerDown(t,e);var i=document.activeElement;i&&i.blur&&i.blur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},r.prototype._dragPointerDown=function(t,e){this.pointerDownPoint=i.getPointerPoint(e);var n="touchstart"==t.type,r=t.target.nodeName;n||"SELECT"==r||o(t)},r.prototype.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},r.prototype._dragPointerMove=function(t,e){var n=i.getPointerPoint(e),o={x:n.x-this.pointerDownPoint.x,y:n.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(o)&&this._dragStart(t,e),o},r.prototype.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},r.prototype.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},r.prototype._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},r.prototype._dragStart=function(t,e){this.isDragging=!0,this.dragStartPoint=r.getPointerPoint(e),this.isPreventingClicks=!0,this.dragStart(t,e)},r.prototype.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},r.prototype._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},r.prototype.dragMove=function(t,e,i){o(t),this.emitEvent("dragMove",[t,e,i])},r.prototype._dragEnd=function(t,e){this.isDragging=!1;var i=this;setTimeout(function(){delete i.isPreventingClicks}),this.dragEnd(t,e)},r.prototype.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},r.prototype.onclick=function(t){this.isPreventingClicks&&o(t)},r.prototype._staticClick=function(t,e){var i=t.target.nodeName;("INPUT"==i||"TEXTAREA"==i)&&t.target.focus(),this.staticClick(t,e)},r.prototype.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},r.getPointerPoint=function(t){return{x:void 0!==t.pageX?t.pageX:t.clientX,y:void 0!==t.pageY?t.pageY:t.clientY}},r.getPointerPoint=i.getPointerPoint,r}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["classie/classie","eventie/eventie","./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,o,r,s){return e(t,i,n,o,r,s)}):"object"==typeof exports?module.exports=e(t,require("desandro-classie"),require("eventie"),require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.dragPrototype=e(t,t.classie,t.eventie,t.Flickity,t.Unidragger,t.fizzyUIUtils))}(window,function(t,e,i,n,o,r){function s(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function a(e){var i=o.getPointerPoint(e);return i.y-t.pageYOffset}r.extend(n.defaults,{draggable:!0,touchVerticalScroll:!0}),n.createMethods.push("_createDrag");var l={};r.extend(l,o.prototype),l._createDrag=function(){this.on("activate",this.bindDrag),this.on("uiChange",this._uiChangeDrag),this.on("childUIPointerDown",this._childUIPointerDownDrag),this.on("deactivate",this.unbindDrag)},l.bindDrag=function(){this.options.draggable&&!this.isDragBound&&(e.add(this.element,"is-draggable"),this.handles=[this.viewport],this.bindHandles(),this.isDragBound=!0)},l.unbindDrag=function(){this.isDragBound&&(e.remove(this.element,"is-draggable"),this.unbindHandles(),delete this.isDragBound)},l._uiChangeDrag=function(){delete this.isFreeScrolling},l._childUIPointerDownDrag=function(t){s(t),this.pointerDownFocus(t)},l.pointerDown=function(t,i){this._dragPointerDown(t,i);var n=document.activeElement;n&&n.blur&&n!=this.element&&n!=document.body&&n.blur(),this.pointerDownFocus(t),this.velocity=0,e.add(this.viewport,"is-pointer-down"),this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[i])};var c={touchstart:!0,MSPointerDown:!0},u={INPUT:!0,SELECT:!0};l.pointerDownFocus=function(t){!this.options.accessibility||c[t.type]||u[t.target.nodeName]||this.element.focus()},l.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.touchVerticalScrollMove(t,e,i),this._dragMove(t,e,i),this.dispatchEvent("pointerMove",t,[e,i])},l.hasDragStarted=function(t){return!this.isTouchScrolling&&Math.abs(t.x)>3},l.pointerUp=function(t,i){delete this.isTouchScrolling,e.remove(this.viewport,"is-pointer-down"),this.dispatchEvent("pointerUp",t,[i]),this._dragPointerUp(t,i)};var d={touchmove:!0,MSPointerMove:!0};return l.touchVerticalScrollMove=function(e,i,n){var o=this.options.touchVerticalScroll,r="withDrag"==o?!o:this.isDragging||!o;!r&&d[e.type]&&!this.isTouchScrolling&&Math.abs(n.y)>10&&(this.startScrollY=t.pageYOffset,this.pointerWindowStartY=a(i),this.isTouchScrolling=!0)},l.dragStart=function(t,e){this.dragStartPosition=this.x,this.startAnimation(),this.dispatchEvent("dragStart",t,[e])},l.dragMove=function(t,e,i){s(t),this.previousDragX=this.x;var n=i.x,o=this.options.rightToLeft?-1:1;if(this.x=this.dragStartPosition+n*o,!this.options.wrapAround&&this.cells.length){var r=Math.max(-this.cells[0].target,this.dragStartPosition);this.x=this.x>r?.5*(this.x-r)+r:this.x;var a=Math.min(-this.getLastCell().target,this.dragStartPosition);this.x=this.x<a?.5*(this.x-a)+a:this.x}this.previousDragMoveTime=this.dragMoveTime,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i])},l.dragEnd=function(t,e){this.dragEndFlick(),this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.cells[0].target&&-n<this.getLastCell().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());this.select(i),this.dispatchEvent("dragEnd",t,[e])},l.dragEndFlick=function(){if(isFinite(this.previousDragX)){var t=this.dragMoveTime-this.previousDragMoveTime;if(t){t/=1e3/60;var e=this.x-this.previousDragX;this.velocity=e/t}delete this.previousDragX}},l.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getCellDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1),o=i.distance<n.distance?i.index:n.index;return this.options.contain&&!this.options.wrapAround&&(o=Math.abs(o-this.selectedIndex)<=1?this.selectedIndex:o),o},l._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,o=1/0,r=this.options.contain&&!this.options.wrapAround?function(t,e){return e>=t}:function(t,e){return e>t};r(e,o)&&(n+=i,o=e,e=this.getCellDistance(-t,n),null!==e);)e=Math.abs(e);return{distance:o,index:n-i}},l.getCellDistance=function(t,e){var i=this.cells.length,n=this.options.wrapAround&&i>1,o=n?r.modulo(e,i):e,s=this.cells[o];if(!s)return null;var a=n?this.slideableWidth*Math.floor(e/i):0;return t-(s.target+a)},l.dragEndBoostSelect=function(){var t=this.getCellDistance(-this.x,this.selectedIndex);return t>0&&this.velocity<-1?1:0>t&&this.velocity>1?-1:0},l.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,o=i&&r.indexOf(this.cells,i);this.dispatchEvent("staticClick",t,[e,n,o])},r.extend(n.prototype,l),n}),/*!
 * Tap listener v1.1.1
 * listens to taps
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("tap-listener/tap-listener",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof exports?module.exports=e(t,require("unipointer")):t.TapListener=e(t,t.Unipointer)}(window,function(t,e){function i(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function n(t){this.bindTap(t)}n.prototype=new e,n.prototype.bindTap=function(t){t&&(this.unbindTap(),this.tapElement=t,this._bindStartEvent(t,!0))},n.prototype.unbindTap=function(){this.tapElement&&(this._bindStartEvent(this.tapElement,!0),delete this.tapElement)};var o=n.prototype.pointerDown;n.prototype.pointerDown=function(t){"touchstart"==t.type&&i(t),o.apply(this,arguments)};var r=void 0!==t.pageYOffset;return n.prototype.pointerUp=function(i,n){var o=e.getPointerPoint(n),s=this.tapElement.getBoundingClientRect(),a=r?t.pageXOffset:document.body.scrollLeft,l=r?t.pageYOffset:document.body.scrollTop,c=o.x>=s.left+a&&o.x<=s.right+a&&o.y>=s.top+l&&o.y<=s.bottom+l;c&&this.emitEvent("tap",[i,n])},n.prototype.destroy=function(){this.pointerDone(),this.unbindTap()},n}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["eventie/eventie","./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.PrevNextButton=e(t,t.eventie,t.Flickity,t.TapListener,t.fizzyUIUtils))}(window,function(t,e,i,n,o){function r(t,e){this.direction=t,this.parent=e,this._create()}var s="http://www.w3.org/2000/svg",a=function(){function t(){if(void 0!==e)return e;var t=document.createElement("div");return t.innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==s}var e;return t}();return r.prototype=new n,r.prototype._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),i.setUnselectable(e),a()||(this.setArrowText(),e.className+=" no-svg");var n=this;this.onCellSelect=function(){n.update()},this.parent.on("cellSelect",this.onCellSelect),this.on("tap",this.onTap),this.on("pointerDown",function(t,e){n.parent.childUIPointerDown(e)})},r.prototype.activate=function(){this.update(),this.bindTap(this.element),e.bind(this.element,"click",this),this.parent.element.appendChild(this.element)},r.prototype.deactivate=function(){this.parent.element.removeChild(this.element),n.prototype.destroy.call(this),e.unbind(this.element,"click",this)},r.prototype.createSVG=function(){var t=document.createElementNS(s,"svg");t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(s,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("class","arrow");var i=this.isLeft?"translate(15,0)":"translate(85,100) rotate(180)";return e.setAttribute("transform",i),t.appendChild(e),t},r.prototype.setArrowText=function(){var t=this.parent.options,e=this.isLeft?t.leftArrowText:t.rightArrowText;o.setText(this.element,e)},r.prototype.onTap=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},r.prototype.handleEvent=o.handleEvent,r.prototype.onclick=function(){var t=document.activeElement;t&&t==this.element&&this.onTap()},r.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},r.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},r.prototype.update=function(){var t=this.parent.cells;if(this.parent.options.wrapAround&&t.length>1)return void this.enable();var e=t.length?t.length-1:0,i=this.isPrevious?0:e,n=this.parent.selectedIndex==i?"disable":"enable";this[n]()},r.prototype.destroy=function(){this.deactivate()},o.extend(i.defaults,{prevNextButtons:!0,leftArrowText:"\xe2\u20ac\xb9",rightArrowText:"\xe2\u20ac\xba"}),i.createMethods.push("_createPrevNextButtons"),i.prototype._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new r(-1,this),this.nextButton=new r(1,this),this.on("activate",this.activatePrevNextButtons))},i.prototype.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},i.prototype.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},i.PrevNextButton=r,r}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["eventie/eventie","./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.PageDots=e(t,t.eventie,t.Flickity,t.TapListener,t.fizzyUIUtils))}(window,function(t,e,i,n,o){function r(t){this.parent=t,this._create()}return r.prototype=new n,r.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",i.setUnselectable(this.holder),this.dots=[];var t=this;this.onCellSelect=function(){t.updateSelected()},this.parent.on("cellSelect",this.onCellSelect),this.on("tap",this.onTap),this.on("pointerDown",function(e,i){t.parent.childUIPointerDown(i)})},r.prototype.activate=function(){this.setDots(),this.updateSelected(),this.bindTap(this.holder),this.parent.element.appendChild(this.holder)},r.prototype.deactivate=function(){this.parent.element.removeChild(this.holder),n.prototype.destroy.call(this)},r.prototype.setDots=function(){var t=this.parent.cells.length-this.dots.length;t>0?this.addDots(t):0>t&&this.removeDots(-t)},r.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[];t;){var n=document.createElement("li");n.className="dot",e.appendChild(n),i.push(n),t--}this.holder.appendChild(e),this.dots=this.dots.concat(i)},r.prototype.removeDots=function(t){for(var e=this.dots.splice(this.dots.length-t,t),i=0,n=e.length;n>i;i++){var o=e[i];this.holder.removeChild(o)}},r.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot"),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected")},r.prototype.onTap=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=o.indexOf(this.dots,e);this.parent.select(i)}},r.prototype.destroy=function(){this.deactivate()},i.PageDots=r,o.extend(i.defaults,{pageDots:!0}),i.createMethods.push("_createPageDots"),i.prototype._createPageDots=function(){this.options.pageDots&&(this.pageDots=new r(this),this.on("activate",this.activatePageDots),this.on("cellAddedRemoved",this.onCellAddedRemovedPageDots),this.on("deactivate",this.deactivatePageDots))},i.prototype.activatePageDots=function(){this.pageDots.activate()},i.prototype.onCellAddedRemovedPageDots=function(){this.pageDots.setDots()},i.prototype.deactivatePageDots=function(){this.pageDots.deactivate()},i.PageDots=r,r}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["eventEmitter/EventEmitter","eventie/eventie","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(require("wolfy87-eventemitter"),require("eventie"),require("./flickity")):(t.Flickity=t.Flickity||{},t.Flickity.Player=e(t.EventEmitter,t.eventie,t.Flickity))}(window,function(t,e,i){function n(t){if(this.isPlaying=!1,this.parent=t,r){var e=this;this.onVisibilityChange=function(){e.visibilityChange()}}}var o,r;return"hidden"in document?(o="hidden",r="visibilitychange"):"webkitHidden"in document&&(o="webkitHidden",r="webkitvisibilitychange"),n.prototype=new t,n.prototype.play=function(){this.isPlaying=!0,delete this.isPaused,r&&document.addEventListener(r,this.onVisibilityChange,!1),this.tick()},n.prototype.tick=function(){if(this.isPlaying&&!this.isPaused){this.tickTime=new Date;var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.isPlaying=!1,delete this.isPaused,this.clear(),r&&document.removeEventListener(r,this.onVisibilityChange,!1)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){this.isPlaying&&(this.isPaused=!0,this.clear())},n.prototype.unpause=function(){this.isPaused&&this.play()},n.prototype.visibilityChange=function(){var t=document[o];this[t?"pause":"unpause"]()},i.createMethods.push("_createPlayer"),i.prototype._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},i.prototype.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),e.bind(this.element,"mouseenter",this),this.isMouseenterBound=!0)},i.prototype.stopPlayer=function(){this.player.stop()},i.prototype.deactivatePlayer=function(){this.player.stop(),this.isMouseenterBound&&(e.unbind(this.element,"mouseenter",this),delete this.isMouseenterBound)},i.prototype.onmouseenter=function(){this.player.pause(),e.bind(this.element,"mouseleave",this)},i.prototype.onmouseleave=function(){this.player.unpause(),e.unbind(this.element,"mouseleave",this)},i.Player=n,n}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity=e(t,t.Flickity,t.fizzyUIUtils))}(window,function(t,e,i){function n(t){for(var e=document.createDocumentFragment(),i=0,n=t.length;n>i;i++){var o=t[i];e.appendChild(o.element)}return e}return e.prototype.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var o=this.cells.length;e=void 0===e?o:e;var r=n(i),s=e==o;if(s)this.slider.appendChild(r);else{var a=this.cells[e].element;this.slider.insertBefore(r,a)}if(0===e)this.cells=i.concat(this.cells);else if(s)this.cells=this.cells.concat(i);else{var l=this.cells.splice(e,o-e);this.cells=this.cells.concat(i).concat(l)}this._sizeCells(i);var c=e>this.selectedIndex?0:i.length;this._cellAddedRemoved(e,c)}},e.prototype.append=function(t){this.insert(t,this.cells.length)},e.prototype.prepend=function(t){this.insert(t,0)},e.prototype.remove=function(t){var e,n,o,r=this.getCells(t),s=0;for(e=0,n=r.length;n>e;e++){o=r[e];var a=i.indexOf(this.cells,o)<this.selectedIndex;s-=a?1:0}for(e=0,n=r.length;n>e;e++)o=r[e],o.remove(),i.removeFrom(this.cells,o);r.length&&this._cellAddedRemoved(0,s)},e.prototype._cellAddedRemoved=function(t,e){e=e||0,this.selectedIndex+=e,this.selectedIndex=Math.max(0,Math.min(this.cells.length-1,this.selectedIndex)),this.emitEvent("cellAddedRemoved",[t,e]),this.cellChange(t)},e.prototype.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var n=i.indexOf(this.cells,e);this.cellChange(n)}},e.prototype.cellChange=function(t){t=t||0,this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize(),this.options.freeScroll?this.positionSlider():(this.positionSliderAtSelected(),this.select(this.selectedIndex))},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell"],e):"object"==typeof exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell")))}(window,function(t){return t}),/*!
 * Flickity asNavFor v1.0.1
 * enable asNavFor for Flickity
 */
function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["classie/classie","flickity/js/index","fizzy-ui-utils/utils"],function(i,n,o){return e(t,i,n,o)}):"object"==typeof exports?module.exports=e(t,require("desandro-classie"),require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t,t.classie,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i,n){return i.createMethods.push("_createAsNavFor"),i.prototype._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},i.prototype.setNavCompanion=function(t){t=n.getQueryElement(t);var e=i.data(t);if(e&&e!=this){this.navCompanion=e;var o=this;this.onNavCompanionSelect=function(){o.navCompanionSelect()},e.on("cellSelect",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect()}},i.prototype.navCompanionSelect=function(){if(this.navCompanion){var t=this.navCompanion.selectedIndex;this.select(t),this.removeNavSelectedElement(),this.selectedIndex==t&&(this.navSelectedElement=this.cells[t].element,e.add(this.navSelectedElement,"is-nav-selected"))}},i.prototype.activateAsNavFor=function(){this.navCompanionSelect()},i.prototype.removeNavSelectedElement=function(){this.navSelectedElement&&(e.remove(this.navSelectedElement,"is-nav-selected"),delete this.navSelectedElement)},i.prototype.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.select(n)},i.prototype.deactivateAsNavFor=function(){this.removeNavSelectedElement()},i.prototype.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("cellSelect",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},i}),/*!
 * imagesLoaded v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(t,e){"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(t,e){for(var i in e)t[i]=e[i];return t}function o(t){return"[object Array]"===p.call(t)}function r(t){var e=[];if(o(t))e=t;else if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e}function s(t,e,i){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),c&&(this.jqDeferred=new c.Deferred);var o=this;setTimeout(function(){o.check()})}function a(t){this.img=t}function l(t){this.src=t,h[t]=this}var c=t.jQuery,u=t.console,d="undefined"!=typeof u,p=Object.prototype.toString;s.prototype=new e,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var o=i.querySelectorAll("img"),r=0,s=o.length;s>r;r++){var a=o[r];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},s.prototype.check=function(){function t(t,o){return e.options.debug&&d&&u.log("confirm",t,o),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var r=this.images[o];r.on("confirm",t),r.check()}},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},c&&(c.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(c(this))}),a.prototype=new e,a.prototype.check=function(){var t=h[this.img.src]||new l(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var h={};return l.prototype=new e,l.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},l.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},s}),/*!
 * Flickity imagesLoaded v1.0.0
 * enables imagesLoaded option for Flickity
 */
function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){return e.createMethods.push("_createImagesLoaded"),e.prototype._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},e.prototype.imagesLoaded=function(){function t(t,i){var n=e.getParentCell(i.img);e.cellSizeChange(n&&n.element)}if(this.options.imagesLoaded){var e=this;i(this.slider).on("progress",t)}},e});var Sprint;!function(){var t=function(t,e){for(var i=Sprint(e),n=Object.keys(t),o=n.length,r=0;o>r;r++)for(var s=n[r],a=t[s],l=a.length,c=0;l>c;c++)i.on(s,a[c])},e=function(){var t="animation-iteration-count column-count flex-grow flex-shrink font-weight line-height opacity order orphans widows z-index".split(" ");return function(e,i){if(l(e,t))return i;var n="string"==typeof i?i:i.toString();return i&&!/\D/.test(n)&&(n+="px"),n}}(),i={afterbegin:function(t){this.insertBefore(t,this.firstChild)},afterend:function(t){var e=this.parentElement;e&&e.insertBefore(t,this.nextSibling)},beforebegin:function(t){var e=this.parentElement;e&&e.insertBefore(t,this)},beforeend:function(t){this.appendChild(t)}},n=function(e,i){if(!(1<e.nodeType)){var n=e.sprintEventListeners;n&&t(n,i);for(var o,r=x("*",e),s=r.length,a=0;s>a;a++)(n=r[a].sprintEventListeners)&&(o||(o=x("*",i)),t(n,o[a]))}},o=function(t,e,i,n,o){var r=[],s=this;return this.each(function(){for(var a=t?this.parentElement:this;a&&(!o||o!=a)&&(n&&!s.is(n,a)||(r.push(a),!i))&&!e;)a=a.parentElement}),Sprint(d(r))},r=function(t,e){return Object.keys(t.sprintEventListeners).filter(function(t){return b(e).every(function(e){return l(e,b(t))})})},s=function(t,i,n){if(null==n){var o=t.get(0);if(!o||1<o.nodeType)return;return t=i[0].toUpperCase()+i.substring(1),o==document?(o=f["offset"+t],t=window["inner"+t],o>t?o:t):o==window?window["inner"+t]:o.getBoundingClientRect()[i]}var r="function"==typeof n,s=r?"":e(i,n);return t.each(function(t){this==document||this==window||1<this.nodeType||(r&&(s=e(i,n.call(this,t,Sprint(this)[i]()))),this.style[i]=s)})},a=function(t,e){var o=e.length,r=e;if(o>1&&-1<t.indexOf("after"))for(var r=[],s=o;s--;)r.push(e[s]);for(s=0;o>s;s++){var l=r[s];if("string"==typeof l||"number"==typeof l)this.each(function(){this.insertAdjacentHTML(t,l)});else if("function"==typeof l)this.each(function(e){e=l.call(this,e,this.innerHTML),a.call(Sprint(this),t,[e])});else{var c=l instanceof k,u=[],d=c?l.get():Array.isArray(l)?v(l,!0,!0):l.nodeType?[l]:w(l),p=d.length;if(this.each(function(e){for(var o=document.createDocumentFragment(),r=0;p>r;r++){var s,a=d[r];e?(s=a.cloneNode(!0),n(a,s)):s=a,o.appendChild(s),u.push(s)}i[t].call(this,o)}),c&&(l.dom=u,l.length=u.length),!(o-1>s))return u}}},l=function(t,e){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1},c=function(t,e,i){if(null==e)return"add"==t?this:this.removeAttr("class");var n,o,r;return"string"==typeof e&&(n=!0,o=e.trim().split(" "),r=o.length),this.each(function(s,a){if(!(1<this.nodeType)){if(!n){var l=e.call(a,s,a.className);if(!l)return;o=l.trim().split(" "),r=o.length}for(l=0;r>l;l++){var c=o[l];c&&(null==i?a.classList[t](c):a.classList.toggle(c,i))}}})},u=function(){for(var t=["mozMatchesSelector","webkitMatchesSelector","msMatchesSelector","matches"],e=t.length;e--;){var i=t[e];if(Element.prototype[i])return i}}(),d=function(t){for(var e=[],i=0,n=t.length,o=0;n>o;o++){for(var r=t[o],s=!1,a=0;i>a;a++)if(r===e[a]){s=!0;break}s||(e[i++]=r)}return e},p=function(){var t=function(t,e,i){return 2>Object.keys(t.sprintEventListeners).filter(function(t){return b(e)[0]===b(t)[0]}).map(function(e){return t.sprintEventListeners[e]}).reduce(function(t,e){return t.concat(e)}).filter(function(t){return t===i}).length?!1:!0},e=function(e,i,n){return function(o){n&&n!==o||(e.removeEventListener(i,o),/\./.test(i)&&!t(e,i,o)&&e.removeEventListener(b(i)[0],o))}},i=function(t,e){return t.filter(function(t){return e&&e!==t})};return function(t,n){return function(o){t.sprintEventListeners[o].forEach(e(t,o,n)),t.sprintEventListeners[o]=i(t.sprintEventListeners[o],n)}}}(),h=function(t,e){return function(i){r(t,i).forEach(p(t,e))}},f=document.documentElement,v=function(t,e,i){for(var n=t.length,o=n;o--;)if(!t[o]&&0!==t[o]||e&&t[o]instanceof k||i&&("string"==typeof t[o]||"number"==typeof t[o])){for(var o=[],r=0;n>r;r++){var s=t[r];if(s||0===s)if(e&&s instanceof k)for(var a=0;a<s.length;a++)o.push(s.get(a));else o.push(!i||"string"!=typeof s&&"number"!=typeof s?s:document.createTextNode(s))}return o}return t},m=function(){var t;return function(e,i,n){if(!t){var o=f.scrollTop;f.scrollTop=o+1;var r=f.scrollTop;f.scrollTop=o,t=r>o?f:document.body}if(null==n){if(e=e.get(0),!e)return;return(e==window||e==document)&&(e=t),e[i]}return e.each(function(){var e=this;(e==window||e==document)&&(e=t),e[i]=n})}}(),g=function(t,e,i,n){var o=[],r=e+"ElementSibling";return t.each(function(){for(var e=this;(e=e[r])&&(!n||!t.is(n,e));)i&&!t.is(i,e)||o.push(e)}),Sprint(d(o))},y=function(t,e,i){var n=e+"ElementSibling";return t.map(function(){var e=this[n];return!e||i&&!t.is(i,e)?void 0:e},!1)},x=function(t,e){if(e=e||document,/^[\#.]?[\w-]+$/.test(t)){var i=t[0];return"."==i?w(e.getElementsByClassName(t.slice(1))):"#"==i?(i=e.getElementById(t.slice(1)))?[i]:[]:"body"==t?[document.body]:w(e.getElementsByTagName(t))}return w(e.querySelectorAll(t))},b=function(t){return v(t.split("."))},w=function(t){for(var e=[],i=t.length;i--;)e[i]=t[i];return e},S=function(){var t=function(t,e){var i=Sprint(t).clone(!0).get(0),n=i;if(i&&!(1<this.nodeType)){for(;n.firstChild;)n=n.firstChild;if("inner"==e){for(;this.firstChild;)n.appendChild(this.firstChild);this.appendChild(i)}else{var o="all"==e?this.get(0):this,r=o.parentNode,s=o.nextSibling;"all"==e?this.each(function(){n.appendChild(this)}):n.appendChild(o),r.insertBefore(i,s)}}};return function(e,i){return"function"==typeof e?this.each(function(t){Sprint(this)["inner"==i?"wrapInner":"wrap"](e.call(this,t))}):"all"==i?t.call(this,e,i):this.each(function(){t.call(this,e,i)}),this}}(),C={legend:{intro:"<fieldset>",outro:"</fieldset>"},area:{intro:"<map>",outro:"</map>"},param:{intro:"<object>",outro:"</object>"},thead:{intro:"<table>",outro:"</table>"},tr:{intro:"<table><tbody>",outro:"</tbody></table>"},col:{intro:"<table><tbody></tbody><colgroup>",outro:"</colgroup></table>"},td:{intro:"<table><tbody><tr>",outro:"</tr></tbody></table>"}};["tbody","tfoot","colgroup","caption"].forEach(function(t){C[t]=C.thead}),C.th=C.td;var k=function(t,e){if("string"==typeof t)if("<"==t[0]){var i=document.createElement("div"),n=/[\w:-]+/.exec(t)[0],n=C[n],o=t.trim();if(n&&(o=n.intro+o+n.outro),i.insertAdjacentHTML("afterbegin",o),o=i.lastChild,n)for(n=n.outro.match(/</g).length;n--;)o=o.lastChild;i.textContent="",this.dom=[o]}else this.dom=e&&e instanceof k?e.find(t).get():x(t,e);else if(Array.isArray(t))this.dom=v(t);else if(t instanceof NodeList||t instanceof HTMLCollection)this.dom=w(t);else{if(t instanceof k)return t;if("function"==typeof t)return this.ready(t);this.dom=t?[t]:[]}this.length=this.dom.length};k.prototype={add:function(t){var e=this.get();t=Sprint(t);for(var i=t.get(),n=0;n<t.length;n++)e.push(i[n]);return Sprint(d(e))},addClass:function(t){return c.call(this,"add",t)},after:function(){return a.call(this,"afterend",arguments),this},append:function(){return a.call(this,"beforeend",arguments),this},appendTo:function(t){return Sprint(a.call(Sprint(t),"beforeend",[this]))},attr:function(t,e){var i="function"==typeof e;if("string"==typeof e||"number"==typeof e||i)return this.each(function(n){1<this.nodeType||this.setAttribute(t,i?e.call(this,n,this.getAttribute(t)):e)});if("object"==typeof t){var n=Object.keys(t),o=n.length;return this.each(function(){if(!(1<this.nodeType))for(var e=0;o>e;e++){var i=n[e];this.setAttribute(i,t[i])}})}var r=this.get(0);return!r||1<r.nodeType?void 0:(r=r.getAttribute(t),null==r?void 0:r?r:t)},before:function(){return a.call(this,"beforebegin",arguments),this},children:function(t){var e=[],i=this;return this.each(function(){if(!(1<this.nodeType))for(var n=this.children,o=n.length,r=0;o>r;r++){var s=n[r];t&&!i.is(t,s)||e.push(s)}}),Sprint(e)},clone:function(t){return this.map(function(){if(this){var e=this.cloneNode(!0);return t&&n(this,e),e}},!1)},closest:function(t,e){return o.call(this,!1,!1,!0,t,e)},css:function(t,i){var n=typeof i,o="string"==n;if(o||"number"==n){var r=o&&/=/.test(i);if(r)var s=parseInt(i[0]+i.slice(2));return this.each(function(){if(!(1<this.nodeType)){if(r)var n=parseInt(getComputedStyle(this).getPropertyValue(t))+s;this.style[t]=e(t,r?n:i)}})}if("function"==n)return this.each(function(e){if(!(1<this.nodeType)){var n=getComputedStyle(this).getPropertyValue(t);this.style[t]=i.call(this,e,n)}});if("string"==typeof t)return o=this.get(0),!o||1<o.nodeType?void 0:getComputedStyle(o).getPropertyValue(t);if(Array.isArray(t)){if(o=this.get(0),!o||1<o.nodeType)return;for(var n={},o=getComputedStyle(o),a=t.length,l=0;a>l;l++){var c=t[l];n[c]=o.getPropertyValue(c)}return n}var u=Object.keys(t),d=u.length;return this.each(function(){if(!(1<this.nodeType))for(var i=0;d>i;i++){var n=u[i];this.style[n]=e(n,t[n])}})},detach:function(){return this.map(function(){var t=this.parentElement;return t?(t.removeChild(this),this):void 0},!1)},each:function(t){for(var e=this.dom,i=this.length,n=0;i>n;n++){var o=e[n];t.call(o,n,o)}return this},empty:function(){return this.each(function(){this.innerHTML=""})},eq:function(t){return Sprint(this.get(t))},filter:function(t){var e="function"==typeof t,i=this;return this.map(function(n){return 1<this.nodeType||!e&&!i.is(t,this)||e&&!t.call(this,n,this)?void 0:this},!1)},find:function(t){if("string"==typeof t){var e=[];return this.each(function(){if(!(1<this.nodeType))for(var i=x(t,this),n=i.length,o=0;n>o;o++)e.push(i[o])}),Sprint(d(e))}for(var i=t.nodeType?[t]:t.get(),n=i.length,o=[],r=0,s=0;s<this.length;s++){var a=this.get(s);if(!(1<a.nodeType))for(var l=0;n>l;l++){var c=i[l];if(a.contains(c)&&(o[r++]=c,!(n>r)))return Sprint(o)}}return Sprint(o)},first:function(){return this.eq(0)},get:function(t){return null==t?this.dom:(0>t&&(t+=this.length),this.dom[t])},has:function(t){if("string"==typeof t)return this.map(function(){return 1<this.nodeType||!x(t,this)[0]?void 0:this},!1);for(var e=[],i=this.length;i--;){var n=this.get(i);if(n.contains(t)){e.push(n);break}}return Sprint(e)},hasClass:function(t){for(var e=this.length;e--;){var i=this.get(e);if(1<i.nodeType)return;if(i.classList.contains(t))return!0}return!1},height:function(t){return s(this,"height",t)},html:function(t){if(null==t){var e=this.get(0);return e?e.innerHTML:void 0}return this.each("function"==typeof t?function(e){e=t.call(this,e,this.innerHTML),Sprint(this).html(e)}:function(){this.innerHTML=t})},index:function(t){if(this.length){var e;t?"string"==typeof t?(e=this.get(0),t=Sprint(t)):(e=t instanceof k?t.get(0):t,t=this):(e=this.get(0),t=this.first().parent().children()),t=t.get();for(var i=t.length;i--;)if(t[i]==e)return i;return-1}},insertAfter:function(t){return Sprint(t).after(this),this},insertBefore:function(t){return Sprint(t).before(this),this},is:function(t,e){var i=e?[e]:this.get(),n=i.length;if("string"==typeof t){for(var o=0;n>o;o++){var r=i[o];if(!(1<r.nodeType)&&r[u](t))return!0}return!1}if("object"==typeof t){for(var r=t instanceof k?t.get():t.length?t:[t],s=r.length,o=0;n>o;o++)for(var a=0;s>a;a++)if(i[o]===r[a])return!0;return!1}if("function"==typeof t){for(o=0;n>o;o++)if(t.call(this,o,this))return!0;return!1}},last:function(){return this.eq(-1)},map:function(t,e){null==e&&(e=!0);for(var i=this.get(),n=this.length,o=[],r=0;n>r;r++){var s=i[r],s=t.call(s,r,s);if(e&&Array.isArray(s))for(var a=s.length,l=0;a>l;l++)o.push(s[l]);else o.push(s)}return Sprint(o)},next:function(t){return y(this,"next",t)},nextAll:function(t){return g(this,"next",t)},nextUntil:function(t,e){return g(this,"next",e,t)},not:function(t){var e="function"==typeof t,i=this;return this.map(function(n){if(e){if(t.call(this,n,this))return}else if(i.is(t,this))return;return this},!1)},off:function(t,e){return"object"==typeof t?(Object.keys(t).forEach(function(e){this.off(e,t[e])},this),this):(t&&(t=t.trim().split(" ")),this.each(function(){this.sprintEventListeners&&(t?t.forEach(h(this,e)):Object.keys(this.sprintEventListeners).forEach(p(this)))}))},offset:function(t){if(!t){var e=this.get(0);if(!e||1<e.nodeType)return;return e=e.getBoundingClientRect(),{top:e.top,left:e.left}}return"object"==typeof t?this.each(function(){if(!(1<this.nodeType)){var e=Sprint(this);"static"==e.css("position")?e.css("position","relative"):e.css({top:0,left:0});var i=e.offset();e.css({top:t.top-i.top+"px",left:t.left-i.left+"px"})}}):"function"==typeof t?this.each(function(e){var i=Sprint(this);e=t.call(this,e,i.offset()),i.offset(e)}):void 0},offsetParent:function(){var t=[];return this.each(function(){if(!(1<this.nodeType)){for(var e=this;e!=f;){var e=e.parentNode,i=getComputedStyle(e).getPropertyValue("position");if(!i)break;if("static"!=i)return void t.push(e)}t.push(f)}}),Sprint(t)},on:function(t,e){if(e){var i=t.trim().split(" ");return this.each(function(){this.sprintEventListeners||(this.sprintEventListeners={}),i.forEach(function(t){this.sprintEventListeners[t]||(this.sprintEventListeners[t]=[]),this.sprintEventListeners[t].push(e),this.addEventListener(t,e),/\./.test(t)&&this.addEventListener(b(t)[0],e)},this)})}return Object.keys(t).forEach(function(e){this.on(e,t[e])},this),this},parent:function(t){return o.call(this,!0,!0,!1,t)},parents:function(t){return o.call(this,!0,!1,!1,t)},position:function(){var t=this.offset(),e=this.parent().offset();return t?{top:t.top-e.top,left:t.left-e.left}:void 0},prop:function(t,e){if("object"==typeof t){var i=Object.keys(t),n=i.length;return this.each(function(){for(var e=0;n>e;e++){var o=i[e];this[o]=t[o]}})}if(null==e){var o=this.get(0);return o?o[t]:void 0}var r="function"==typeof e;return this.each(function(i){this[t]=r?e.call(this,i,this[t]):e})},prepend:function(){return a.call(this,"afterbegin",arguments),this},prependTo:function(t){return Sprint(a.call(Sprint(t),"afterbegin",[this]))},prev:function(t){return y(this,"previous",t)},prevAll:function(t){return g(this,"previous",t)},prevUntil:function(t,e){return g(this,"previous",e,t)},ready:function(t){return this.dom=[document],this.length=1,this.on("DOMContentLoaded",t)},remove:function(t){var e=this;return this.each(function(){var i=this.parentElement;i&&(t&&!e.is(t,this)||i.removeChild(this))})},removeAttr:function(t){if(t){var e=t.trim().split(" "),i=e.length;this.each(function(){if(!(1<this.nodeType))for(var t=0;i>t;t++)this.removeAttribute(e[t])})}return this},removeClass:function(t){return c.call(this,"remove",t)},removeProp:function(t){return this.each(function(){this[t]=void 0})},replaceAll:function(t){return Sprint(t).replaceWith(this),this},replaceWith:function(t){return"function"==typeof t?this.each(function(e){Sprint(this).replaceWith(t.call(this,e,this))}):this.before(t).remove()},scrollLeft:function(t){return m(this,"scrollLeft",t)},scrollTop:function(t){return m(this,"scrollTop",t)},siblings:function(t){var e=[],i=this;return this.each(function(n,o){Sprint(this).parent().children().each(function(){this==o||t&&!i.is(t,this)||e.push(this)})}),Sprint(e)},size:function(){return this.length},slice:function(t,e){var i=this.get(),n=[],o=t>=0?t:t+this.length,r=this.length;for(0>e?r+=e:e>=0&&(r=e>this.length?this.length:e);r>o;o++)n.push(i[o]);return Sprint(n)},text:function(t){if(null==t){var e=[];return this.each(function(){e.push(this.textContent)}),e.join("")}var i="function"==typeof t;return this.each(function(e){this.textContent=i?t.call(this,e,this.textContent):t})},toggleClass:function(t,e){return c.call(this,"toggle",t,e)},trigger:function(t){if(!window.CustomEvent||"function"!=typeof window.CustomEvent){var e=function(t,e){var i;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent"),i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i};e.prototype=window.Event.prototype,window.CustomEvent=e}return this.each(function(){r(this,t).forEach(function(t){this.dispatchEvent(new e(t,{bubbles:!0,cancelable:!0}))},this)})},unwrap:function(){return this.parent().each(function(){this!=document.body&&this!=f&&Sprint(this).replaceWith(this.childNodes)}),this},val:function(t){if(null==t){var e=this.get(0);if(!e)return;if(e.multiple){var i=[];return this.first().children(":checked").each(function(){i.push(this.value)}),i}return e.value}if(Array.isArray(t)){var n=this;return this.each(function(){this.multiple?n.children().each(function(){this.selected=l(this.value,t)}):this.checked=l(this.value,t)})}return this.each("function"==typeof t?function(e){Sprint(this).val(t.call(this,e,this.value))}:function(){this.value=t})},width:function(t){return s(this,"width",t)},wrap:function(t){return S.call(this,t)},wrapAll:function(t){return S.call(this,t,"all")},wrapInner:function(t){return S.call(this,t,"inner")}},Sprint=function(t,e){return new k(t,e)},null==window.$&&(window.$=Sprint)}(),function(){"use strict";/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
function t(e,n){function o(t,e){return function(){return t.apply(e,arguments)}}var r;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=s.length;c>l;l++)a[s[l]]=o(a[s[l]],a);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!e,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=n&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(n&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;n&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],n){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(c=t.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(e=this.findControl(u)){if(this.focus(u),i)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-s>100||n&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),n&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return n&&!o&&(l=u.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,n,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,i){return new t(e,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2014
  * https://github.com/ded/reqwest
  */
!function(t,e,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):e[t]=i()}("reqwest",this,function(){function succeed(t){var e=protocolRe.exec(t.url);return e=e&&e[1]||context.location.protocol,httpsRe.test(e)?twoHundo.test(t.request.status):!!t.request.response}function handleReadyState(t,e,i){return function(){return t._aborted?i(t.request):t._timedOut?i(t.request,"Request is aborted: timeout"):void(t.request&&4==t.request[readyState]&&(t.request.onreadystatechange=noop,succeed(t)?e(t.request):i(t.request)))}}function setHeaders(t,e){var i,n=e.headers||{};n.Accept=n.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"];var o="function"==typeof FormData&&e.data instanceof FormData;e.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||o||(n[contentType]=e.contentType||defaultHeaders.contentType);for(i in n)n.hasOwnProperty(i)&&"setRequestHeader"in t&&t.setRequestHeader(i,n[i])}function setCredentials(t,e){"undefined"!=typeof e.withCredentials&&"undefined"!=typeof t.withCredentials&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,i,n){var o=uniqid++,r=t.jsonpCallback||"callback",s=t.jsonpCallbackName||reqwest.getcallbackPrefix(o),a=new RegExp("((^|\\?|&)"+r+")=([^&]+)"),l=n.match(a),c=doc.createElement("script"),u=0,d=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?n=n.replace(a,"$1="+s):s=l[3]:n=urlappend(n,r+"="+s),context[s]=generalCallback,c.type="text/javascript",c.src=n,c.async=!0,"undefined"==typeof c.onreadystatechange||d||(c.htmlFor=c.id="_reqwest_"+o),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||u?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),e(lastValue),lastValue=void 0,head.removeChild(c),void(u=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,i({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),u=1}}}function getRequest(t,e){var i,n=this.o,o=(n.method||"GET").toUpperCase(),r="string"==typeof n?n:n.url,s=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,a=!1;return"jsonp"!=n.type&&"GET"!=o||!s||(r=urlappend(r,s),s=null),"jsonp"==n.type?handleJsonp(n,t,e,r):(i=n.xhr&&n.xhr(n)||xhr(n),i.open(o,r,n.async===!1?!1:!0),setHeaders(i,n),setCredentials(i,n),context[xDomainRequest]&&i instanceof context[xDomainRequest]?(i.onload=t,i.onerror=e,i.onprogress=function(){},a=!0):i.onreadystatechange=handleReadyState(this,t,e),n.before&&n.before(i),a?setTimeout(function(){i.send(s)},200):i.send(s),i)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){return t.match("json")?"json":t.match("javascript")?"js":t.match("text")?"html":t.match("xml")?"xml":void 0}function init(o,fn){function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(t,e,i){for(t=self.request,self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=i,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,i);complete(t)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var i,n,o,r,s=t.name,a=t.tagName.toLowerCase(),l=function(t){t&&!t.disabled&&e(s,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(t.type)||(i=/checkbox/i.test(t.type),n=/radio/i.test(t.type),o=t.value,(!(i||n)||t.checked)&&e(s,normalize(i&&""===o?"on":o)));break;case"textarea":e(s,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())l(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(r=0;t.length&&r<t.length;r++)t.options[r].selected&&l(t.options[r])}}function eachFormElement(){var t,e,i=this,n=function(t,e){var n,o,r;for(n=0;n<e.length;n++)for(r=t[byTag](e[n]),o=0;o<r.length;o++)serial(r[o],i)};for(e=0;e<arguments.length;e++)t=arguments[e],/input|select|textarea/i.test(t.tagName)&&serial(t,i),n(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply(function(e,i){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(i)):t[e]=i},arguments),t}function buildParams(t,e,i,n){var o,r,s,a=/\[\]$/;if(isArray(e))for(r=0;e&&r<e.length;r++)s=e[r],i||a.test(t)?n(t,s):buildParams(t+"["+("object"==typeof s?r:"")+"]",s,i,n);else if(e&&"[object Object]"===e.toString())for(o in e)buildParams(t+"["+o+"]",e[o],i,n);else n(t,e)}var context=this;if(context.hasOwnProperty("window"))var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(t){if(t.crossOrigin===!0){var e=context[xmlHttpRequest]?new XMLHttpRequest:null;if(e&&"withCredentials"in e)return e;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(t){return t}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return t=t||function(){},e=e||function(){},this._fulfilled?this._responseArgs.resp=t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this},"catch":function(t){return this.fail(t)}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply(function(e,i){t.push({name:e,value:i})},arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e,i=Array.prototype.slice.call(arguments,0);return t=i.pop(),t&&t.nodeType&&i.push(t)&&(t=null),t&&(t=t.type),e="map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString,e.apply(null,i)},reqwest.toQueryString=function(t,e){var i,n,o=e||!1,r=[],s=encodeURIComponent,a=function(t,e){e="function"==typeof e?e():null==e?"":e,r[r.length]=s(t)+"="+s(e)};if(isArray(t))for(n=0;t&&n<t.length;n++)a(t[n].name,t[n].value);else for(i in t)t.hasOwnProperty(i)&&buildParams(i,t[i],o,a);return r.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest.ajaxSetup=function(t){t=t||{};for(var e in t)globalSetupOptions[e]=t[e]},reqwest});var Utils={inViewport:function(t,e){var i=t.getBoundingClientRect(),e=e||0;return i.top+e<window.innerHeight&&i.bottom-e>0},transitionEnd:function(){var t=document.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return e[i]},setMobile:function(){app.window.get(0).matchMedia("(max-width: 720px)").matches?(document.querySelector("html").classList.add("mobile"),app.mobile=!0,app.NavigationButton.slideout._padding=app.NavigationButton.options.mobilePadding,app.NavigationButton.slideout._translateTo=-app.NavigationButton.options.mobilePadding):(document.querySelector("html").classList.remove("mobile"),app.mobile=!1,app.NavigationButton.slideout._padding=app.NavigationButton.options.padding,app.NavigationButton.slideout._translateTo=-app.NavigationButton.options.padding)},throttle:function(t,e,i){e||(e=250);var n,o;return function(){var r=i||this,s=+new Date,a=arguments;n&&n+e>s?(clearTimeout(o),o=setTimeout(function(){n=s,t.apply(r,a)},e)):(n=s,t.apply(r,a))}},debounce:function(t,e){var i=null;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}},isIE:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(app.ie=!1,e>0||navigator.userAgent.match(/Trident.*rv\:11\./)){var i=document.documentElement;i.setAttribute("data-useragent",navigator.userAgent),app.ie=!0}else app.ie=!1;if(app.ie){var n=document.querySelector("body"),o="ie";n.classList?n.classList.add(o):n.className+=" "+o}}},Introduction=function(t){this.container=$(t),this.setSize()};Introduction.prototype.init=function(){!app.mobile&&window.WebGLRenderingContext&&(this.engine=Matter.Engine.create(this.container.get(0),{render:{options:{wireframes:!1,width:this.width,height:this.height}}}),this.events=Matter.Events,this.engine.enableSleeping=!0,this.setBounds(),this.addObjects(),this.addStatic(),this.zeroGravity(),this.canvas=this.container.find("canvas"),this.setTimescale(.9),Matter.Engine.run(this.engine),this.running=!0,setTimeout("app.Introduction.appear()",100),setTimeout("app.Introduction.removeMouseEvents()",100))},Introduction.prototype.appear=function(){app.Introduction.checkSpeed(),this.canvas.addClass("active"),this.checkSpeedInterval=setInterval("app.Introduction.checkSpeed()",500),this.viewportInterval=setInterval("app.Introduction.checkViewport()",1e3)},Introduction.prototype.checkViewport=function(){if(Utils.inViewport(this.container.get(0))){if(app.Introduction.running)return;app.Introduction.running=!0,Matter.Runner.run(app.Introduction.engine)}else{if(!app.Introduction.running)return;app.Introduction.running=!1,Matter.Runner.stop(app.Introduction.engine)}},Introduction.prototype.resize=function(){try{var t=window.innerWidth-15,e=window.innerHeight;app.Introduction.width=t,app.Introduction.height=e,app.Introduction.canvas.width=t,app.Introduction.canvas.height=e,$(app.Introduction.canvas).attr("style","width: "+t+"px; height: "+e+"px;")}catch(i){}this.init()},Introduction.prototype.startResize=function(){clearInterval(this.checkSpeedInterval);try{var t=this;Matter.Runner.stop(t.engine),Matter.Engine.clear(t.engine),this.engine.world.bodies=void 0,this.engine.world=void 0,this.engine=void 0,this.events=void 0,this.canvas.remove()}catch(e){}},Introduction.prototype.setSize=function(){this.width=window.innerWidth,this.height=window.innerHeight},Introduction.prototype.removeMouseEvents=function(){this.canvas.off("mousewheel",document.body),this.canvas.off("DOMMouseScroll",document.body)},Introduction.prototype.setBounds=function(){this.engine.world.bounds={min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},Introduction.prototype.zeroGravity=function(){this.engine.world.gravity.y=0,this.engine.world.gravity.x=0},Introduction.prototype.addObjects=function(){this.doodleCircle=Matter.Bodies.circle(90,90,94,{mass:2,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-circle-ebe21311.png"}}}),this.doodleCircleMini=Matter.Bodies.circle(this.ranPos().x,this.ranPos().y,40,{mass:1,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-circle-mini-53d4e594.png"}}}),this.doodleLine=Matter.Bodies.rectangle(this.ranPos().x,this.ranPos().y,200,24,{mass:2,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-line-17d85da7.png"}}}),this.doodleTriangle=Matter.Bodies.polygon(this.width-100,90,3,90,{mass:2,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-triangle-10f1e46b.png"}}}),this.doodleWave=Matter.Bodies.rectangle(203,this.height-130,203,24,{rotation:100,mass:2,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-wave-e291aea7.png"}}}),this.doodleX=Matter.Bodies.rectangle(this.width-300,this.height-100,39,39,{mass:2,restitution:1,frictionAir:0,friction:0,sleepThreshold:1/0,render:{sprite:{xScale:.5,yScale:.5,texture:"/images/icons-png/icon-doodle-x-a4258601.png"}}}),this.objects=[this.doodleCircle,this.doodleCircleMini,this.doodleLine,this.doodleTriangle,this.doodleWave,this.doodleX],Matter.World.add(this.engine.world,this.objects),Matter.Body.rotate(this.doodleWave,45)},Introduction.prototype.checkSpeed=function(){bodies=Matter.Composite.allBodies(this.engine.world);for(var t=0;t<bodies.length;t++){var e=bodies[t];e.isStatic||e.motion<.13&&app.Introduction.applyForce(e,.007)}},Introduction.prototype.applyForce=function(t,e){var e=e*t.mass;Matter.Body.applyForce(t,{x:0,y:0},{x:(e+Math.random()*e)*this.choose(),y:(-e+Math.random()*-e)*this.choose()})},Introduction.prototype.ranPos=function(){var t=100,e=120,i={x:this.width/2-Math.random()*t,y:this.height/2+Math.random()*e};return i},Introduction.prototype.addStatic=function(){var t=24,e={isStatic:!0,restitution:0,frictionAir:0,friction:0,mass:0,render:{visible:!1}};Matter.World.add(this.engine.world,[Matter.Bodies.rectangle(window.innerWidth/2,-t,window.innerWidth+2*t,50.5,e),Matter.Bodies.rectangle(window.innerWidth/2,window.innerHeight+t,window.innerWidth+2*t,50.5,e),Matter.Bodies.rectangle(window.innerWidth+t,window.innerHeight/2,50.5,window.innerHeight+2*t,e),Matter.Bodies.rectangle(-t,window.innerHeight/2,50.5,window.innerHeight+2*t,e)])},Introduction.prototype.setTimescale=function(t){for(var e=Matter.Composite.allBodies(this.engine.world),i=0;i<e.length;i++){var n=e[i];n.isStatic||(n.timeScale=t)}},Introduction.prototype.explode=function(t){for(var t=null==t?2:t,e=Matter.Composite.allBodies(this.engine.world),i=0;i<e.length;i++){var n=e[i];if(!n.isStatic){var t=t*n.mass;Matter.Body.applyForce(n,{x:0,y:0},{x:(t+Math.random()*t)*this.choose(),y:(-t+Math.random()*-t)*this.choose()})}}},Introduction.prototype.bounce=function(){this.engine.world.gravity.y=this.round(),this.engine.world.gravity.x=this.round()},Introduction.prototype.choose=function(){var t=[1,-1];return t[Math.round(Math.random())]},Introduction.prototype.round=function(){return Math.random()/this.choose()};var Hoverable=function(t){this.el=$(t),this.html=this.el.html(),this.hoverText=this.el.attr("data-hoverable"),this.rebuild()};Hoverable.prototype.rebuild=function(){if(!app.ie){var t=$('<div class="button__default">'+this.html+"</div>"),e=$('<div class="button__hover">'+this.hoverText+"</div>");this.el.addClass("hoverable"),this.el.html("").append(t).append(e)}};var NavigationButton=function(t){this.el=$(t),this.options={side:"right",panel:document.querySelector(".container"),menu:document.querySelector(".navigation"),padding:370,mobilePadding:250,touch:!1},this.slideout=new Slideout(this.options),this.setListeners()};NavigationButton.prototype.setListeners=function(){var t=this;this.el.on("click",function(e){e.preventDefault(),t.slideout.toggle(),t.el.toggleClass("navigation__button--active")})};var QuoteCarousel=function(t){this.flkty=new Flickity(t,{cellSelector:".carousel-cell",cellAlign:"left",contain:!0,wrapAround:!0}),this.addNavigation()};QuoteCarousel.prototype.addNavigation=function(){var t,e;t=$('<svg class="qoutes__navigation qoutes__navigation-previous"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-quote-prev"></use></svg>'),e=$('<svg class="qoutes__navigation qoutes__navigation-next"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-quote-next"></use></svg>'),$(".flickity-prev-next-button.previous").append(t),$(".flickity-prev-next-button.next").append(e)};var Demo=function(t){this.el=t,this.rotation=0,this.container=$(t).find(".demo__image-container"),this.replay=$(t).find(".demo__replay"),this.replayIcon=$(t).find(".demo__replay-icon"),this.image=$(t).find(".demo__placeholder"),this.activated=!1,this.setListeners()};Demo.prototype.setListeners=function(){var t=this;this.replay.on("click",function(e){e.preventDefault(),t.rotate(),t.reset()})},Demo.prototype.rotate=function(){this.rotation+=360,this.replayIcon.attr("style","transform: rotate("+this.rotation+"deg); -webkit-transform: rotate("+this.rotation+"deg);")},Demo.prototype.activate=function(){var t=app.mobile?100:400;Utils.inViewport(this.image.get(0),t)&&(this.activated||(this.image.attr("src",this.image.attr("data-gif")),this.activated=!0))},Demo.prototype.reset=function(){var t,e;t=0,e=this,this.activated=!1,this.container.addClass("demo__image-container--loading"),this.container.on(Utils.transitionEnd(),function(){0==t&&(e.container.removeClass("demo__image-container--loading"),e.activate()),t+=1})};var Overview=function(t){this.el=$(t),this.services=this.el.find(".overview__service"),this.activated=!1,this.setListeners(),setTimeout(function(){app.OverviewService.activate()},500)};Overview.prototype.setListeners=function(){this.services.on("click",function(){app.window.get(0).matchMedia("(max-width: 720px)").matches&&(window.location.href=this.dataset.link)})},Overview.prototype.activate=function(){!Utils.inViewport(this.el.get(0),150)||this.activated||app.mobile||this.activated||(this.activated=!0,$el1=$(this.services.get(0)),$el2=$(this.services.get(1)),$el3=$(this.services.get(2)),$el1.addClass("overview__service--activated"),$el1.on(Utils.transitionEnd(),function(){$el2.addClass("overview__service--activated")}),$el2.on(Utils.transitionEnd(),function(){$el3.addClass("overview__service--activated"),$el3.on(Utils.transitionEnd(),function(){app.OverviewService.el.addClass("loaded")})}))};var AboutQuote=function(t){this.el=$(t),this.rotation=0,this.shuffleButton=$(".about__quote-refresh"),this.replayIcon=this.el.find(".about__quote-refresh-icon"),this.loadQuotes(),this.setListeners()};AboutQuote.prototype.loadQuotes=function(){this.qoutes=this.el.find(".about__quote-container"),this.remainingQoutes=this.qoutes.dom.slice(1),this.clear();var t=$(this.qoutes.dom[0]);t.addClass("about__quote-container--active"),this.el.append(t)},AboutQuote.prototype.clear=function(){$(".about__quote-container").remove()},AboutQuote.prototype.setListeners=function(){var t=this;this.shuffleButton.on("click",function(e){e.preventDefault(),t.rotate(),t.shuffle()})},AboutQuote.prototype.shift=function(){var t=this.remainingQoutes;t.shift(),this.remainingQoutes=t},AboutQuote.prototype.rotate=function(){this.rotation+=180,this.replayIcon.attr("style","transform: rotate("+this.rotation+"deg); -webkit-transform: rotate("+this.rotation+"deg);")},AboutQuote.prototype.shuffle=function(){var t=this.remainingQoutes,e=this.el.find(".about__quote-container--active"),i=this;this.remainingQoutes=t;var n=this.remainingQoutes[0];e.dom[0].addEventListener(Utils.transitionEnd(),function(){i.clear(),i.el.append(n),$(n).addClass("about__quote-container--active")}),e.removeClass("about__quote-container--active"),this.shift(),0==this.remainingQoutes.length&&(this.remainingQoutes=this.qoutes.dom.slice(0))};var Pricing=function(t){this.el=t,this.currentEl=null,this.elements=$(t).find(".pricing__service"),this.backgrounds=$(t).find(".pricing__service-hover-bg"),this.setListeners()};Pricing.prototype.setListeners=function(){var t=this;this.elements.on("mouseover",function(){if(!app.mobile){var e=this;$(t.backgrounds).each(function(){var i=$(this),n=i.parent().get(0);n!=e?i.addClass("pricing__service-hover-bg--active"):(t.currentEl=i,i.css("z-index",-1))})}}),this.elements.on("click",function(){app.window.get(0).matchMedia("(max-width: 884px)").matches&&(window.location.href=this.dataset.link)}),this.elements.on("mouseout",function(){app.mobile||(t.backgrounds.removeClass("pricing__service-hover-bg--active"),t.currentEl.css("z-index",""),t.currentEl=null)})},function(t,e,i,n,o,r,s){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,r=e.createElement(i),s=e.getElementsByTagName(i)[0],r.async=1,r.src=n,s.parentNode.insertBefore(r,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-10303525-4","auto"),ga("send","pageview");var Tracking=function(){};Tracking.prototype.init=function(){unconfirmed=!0,this.botCheck()},Tracking.prototype.botCheck=function(){_this=this,$(document).on("touchstart mousemove",function(t){$(document).off(t),unconfirmed&&(unconfirmed=!1,_this.Api("/guiapi/auth/verify"))})},Tracking.prototype.Api=function(t){return reqwest(t,function(t){console.log(t)})};var app={},modules;app.window=$(window),app.Tracking=new Tracking,Utils.isIE(),modules=[{name:"Introduction",selector:".introduction","class":Introduction},{name:"Demo",selector:".demo","class":Demo},{name:"OverviewService",selector:".overview__services","class":Overview},{name:"AboutQuote",selector:".about","class":AboutQuote},{name:"NavigationButton",selector:".navigation__button","class":NavigationButton},{name:"Hoverable",selector:"*[data-hoverable]","class":Hoverable},{name:"Pricing",selector:".pricing__services","class":Pricing},{name:"QuoteCarousel",selector:".carousel","class":QuoteCarousel}],$(modules).each(function(){var t=this,e=$(this.selector);$(e.dom).each(function(){app[t.name]=new t["class"](this)})}),Utils.setMobile(),app.Demo&&app.Demo.activate(),app.window.on("resize",Utils.throttle(function(){Utils.setMobile(),app.Introduction.startResize()})),app.window.on("resize",Utils.debounce(function(){app.Introduction.resize()},400)),window.onload=function(){app.Introduction.init(),app.Tracking.init()},app.window.on("scroll",Utils.throttle(function(){app.OverviewService&&app.OverviewService.activate(),app.Demo&&app.Demo.activate()},100)),"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1);